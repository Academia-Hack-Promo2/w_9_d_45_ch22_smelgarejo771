/*!CK:2415344703!*//*1429198971,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["uCwRM"]); }

__d("BlackbirdUpsellConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTION_EDUCATE:"educate",ACTION_UPSELL:"upsell",CLICK_TYPE_DISMISS_PROMO:"dismiss_promo",CLICK_TYPE_ENABLE_CHAT:"enable_chat",CLICK_TYPE_OPEN_SETTINGS:"open_settings"};},null);
__d("BlackbirdUpsell",["Event","Arbiter","AsyncRequest","LegacyContextualDialog","DOM","LayerDestroyOnHide","LayerHideOnTransition","PresencePrivacy","copyProperties","BlackbirdUpsellConfig","BlackbirdUpsellConstants","BlackbirdUpsellTemplates"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s='/ajax/chat/blackbird/update_clicks.php',t='/ajax/chat/blackbird/update_impressions.php',u='/ajax/chat/blackbird/dismiss.php',v=235,w=null,x=null,y=false,z=false;function aa(){}o(aa,{shouldShow:function(){if(this._dialogDismissed)return false;if(this.isEducation()){return !p.EducationDismissed&&p.EducationImpressions<p.EducationImpressionLimit;}else return !!p.UpsellGK&&!p.UpsellDismissed&&p.UpsellImpressions<p.UpsellImpressionLimit&&p.FriendCount>=p.UpsellMinFriendCount;},isEducation:function(){return p.TimeOffline<=p.EducationTimeOfflineThresdhold;},getOfflineContent:function(){if(this.isEducation()){return this._getEducationContent();}else return this._getUpsellContent();},_getEducationContent:function(){ga();var ka=r[':fb:chat:blackbird:offline-educate'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ja(q.CLICK_TYPE_OPEN_SETTINGS);da();});return ka.getRoot();},_getUpsellContent:function(){fa();var ka=r[':fb:chat:blackbird:upsell'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ia(q.CLICK_TYPE_OPEN_SETTINGS);ca();});var ma=ka.getNode('enableChatButton');g.listen(ma,'click',function(){ia(q.CLICK_TYPE_ENABLE_CHAT);ca();});return ka.getRoot();},getBlackbirdContent:function(ka){ga();switch(ka){case n.ONLINE:return r[':fb:chat:blackbird:most-friends-educate'].build().getRoot();case n.OFFLINE:return r[':fb:chat:blackbird:some-friends-educate'].build().getRoot();}},showOfflineDialog:function(ka){this.showDialog(ka,this.getOfflineContent.bind(this));},showBlackbirdDialog:function(ka,la){this.showDialog(ka,this.getBlackbirdContent.bind(null,la));},showDialog:function(ka,la){!w&&this._constructDialog();k.setContent(x,la());w.setContext(ka);w.show();},hide:function(){if(w&&w.isShown())w.hide();},dismiss:function(){this.hide();if(this.isEducation()){da();}else ca();},registerDismissClick:function(){if(this.isEducation()){ja(q.CLICK_TYPE_DISMISS_PROMO);}else ia(q.CLICK_TYPE_DISMISS_PROMO);},isVisible:function(){return z&&!y;},_constructDialog:function(){var ka=r[':fb:chat:blackbird:dialog-frame'].build();x=ka.getNode('dialogContent');w=new j();w.init(ka.getRoot());w.setPosition('above').setWidth(v).setFixed(true).disableBehavior(l).disableBehavior(m);g.listen(ka.getNode('dialogCloseButton'),'click',this.dismiss.bind(this));g.listen(ka.getNode('dialogCloseButton'),'click',this.registerDismissClick.bind(this));}});function ba(ka,la){if(!y&&z){y=true;n.inform('privacy-user-presence-changed');var ma=new i(u);ma.setData({source:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){y=false;});ma.send();}}function ca(){ba(q.ACTION_UPSELL,p.UpsellImpressions);}function da(){ba(q.ACTION_EDUCATE,p.EducationImpressions);}function ea(ka,la){if(!z){z=true;var ma=new i(t);ma.setData({action:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){z=false;});ma.send();}}function fa(){ea(q.ACTION_UPSELL,p.UpsellImpressions);}function ga(){ea(q.ACTION_EDUCATE,p.EducationImpressions);}function ha(ka,la,ma,na){var oa=new i(s);oa.setData({action:ka,impressions:ma,source:la,time_offline:na});oa.send();}function ia(ka){ha(ka,q.ACTION_UPSELL,p.UpsellImpressions,p.TimeOffline);}function ja(ka){ha(ka,q.ACTION_EDUCATE,p.EducateImpressions,p.TimeOffline);}h.subscribe('chat/advanced-settings-dialog-opened',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-online',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-offline',aa.dismiss.bind(aa));e.exports=aa;},null);
__d("Chat",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={buddyListNub:'buddylist-nub/initialized',sidebar:'sidebar/initialized'};function i(k,l){g.subscribe(h[k],function(event,m){l(m);});}var j={openBuddyList:function(){i('buddyListNub',function(k){k.show();i('sidebar',function(l){l.enable();});});},closeBuddyList:function(){i('buddyListNub',function(k){k.hide();});},toggleSidebar:function(){i('sidebar',function(k){k.toggle();});}};e.exports=j;},null);
__d("ChatOptions",["Arbiter","ChannelConstants","JSLogger","PresenceUtil","copyProperties","ChatOptionsInitialData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.create('chat_options'),m={};(function(){var o=b('ChatOptionsInitialData');for(var p in o){var q=o[p];m[p]=!!q;}})();var n=k(new g(),{getSetting:function(o){return m[o];},setSetting:function(o,p,q){if(this.getSetting(o)==p)return;if(q){q='from_'+q;l.log(q,{name:o,new_value:p,old_value:this.getSetting(o)});}m[o]=!!p;g.inform('chat/option-changed',{name:o,value:p});}});g.subscribe(h.getArbiterType('setting'),function(o,p){var q=p.obj;if(q.window_id===j.getSessionID())return;n.setSetting(q.setting,!!q.value,'channel');});g.subscribe(i.DUMP_EVENT,function(o,p){p.chat_options=m;});e.exports=n;},null);
__d("ChatQuietLinks",["Event","DOM","UserAgent_DEPRECATED","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;},null);
__d("OrderedFriendsList",["AvailableListConstants","PresenceStatus","SearchableEntry","ShortProfiles","WorkModeConfig","createArrayFromMixed","isValidUniqueID","InitialChatFriendsList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[],o=[],p={},q=[],r={},s=[],t={contains:function(u){return u in p;},getList:function(){if(k.is_work_user)return l(n);t.reRank();var u=l(n);u=u.filter(function(v){var w=j.getNowUnsafe(v);return !w||w.type=="friend";});return u;},getSearchableEntries:function(u,v){var w=t.getList();j.getMulti(w.slice(0,u),function(x){var y=[];for(var z in x)y.push(t.normalizeProfileEntry(x[z]));var aa=t.getGroups().map(t.normalizeThreadEntry);v(y.concat(aa).filter(function(ba){return !!ba;}).sort(function(ba,ca){return ba.getOrder()-ca.getOrder();}));});},normalizeProfileEntry:function(u){var v=u.searchTokens||[];return new i({uniqueID:u.id,keywordString:v.join(' '),order:t.getRank(u.id),photo:u.thumbSrc,title:u.name,type:u.type,uri:u.uri,auxiliaryData:{isMessengerUser:u.is_messenger_user}});},normalizeThreadEntry:function(u,v){var w=u.mercury_thread,x=u.participants_to_render,y=u.text,z=null;if(!y)y=w.name;var aa=x.map(function(ca){return ca.name;}).join(', ');if(!y){y=aa;}else z=aa;var ba=u.uid;if(!y||!m(ba))return null;return new i({uniqueID:ba,order:v,photo:w.image_src,title:y,subtitle:z,type:'thread',auxiliaryData:{participantsToRender:x,thread:w}});},getRank:function(u){return u in p?p[u]:n.length;},getActiveList:function(){if(q.length>0)return q;return t.getList();},getActiveRank:function(u){return u in r?r[u]:t.getRank(u);},reRank:function(){n=[];var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(h.get(w)==x){n[u]=w;p[w]=u++;}});},rankActive:function(){var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(x==g.ACTIVE){q[u]=w;r[w]=u++;}});},getGroups:function(){return o;}};(function(){var u=b('InitialChatFriendsList');n=u.list.length?u.list:[];o=u.groups||[];if(!k.is_work_user){s=n.slice();t.rankActive();t.reRank();}else n.forEach(function(v,w){p[v]=w;});})();e.exports=a.OrderedFriendsList||t;},null);
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;},null);
__d("ChatDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatTabActions",["ChatDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({CLOSE_TAB:null,CLOSE_ALL_TABS:null,CLOSE_FRAGILE_TABS:null,LOWER_TAB:null,PERSIST_LOCAL_STATE:null,PROMOTE_TAB:null,RAISE_TAB:null}),j={Types:i,closeTab:function(k,l){g.dispatch({actionType:i.CLOSE_TAB,reason:l,threadID:k});},closeAllTabs:function(){g.dispatch({actionType:i.CLOSE_ALL_TABS});},closeFragileTabs:function(){g.dispatch({actionType:i.CLOSE_FRAGILE_TABS});},lowerTab:function(k){g.dispatch({actionType:i.LOWER_TAB,threadID:k});},persistLocalState:function(){g.dispatch({actionType:i.PERSIST_LOCAL_STATE});},promoteTab:function(k){g.dispatch({actionType:i.PROMOTE_TAB,threadID:k});},raiseTab:function(k,l,m){g.dispatch({actionType:i.RAISE_TAB,signatureID:m,threadID:k,userAction:l});}};e.exports=j;},null);
__d("ChatSidebarComposeLink.react",["ChatOpenTab","React","TooltipLink.react","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ChatSidebarComposeLink",propTypes:{className:m.string.isRequired},componentDidMount:function(){g.listenOpenEmptyTab(h.findDOMNode(this),'sidebar');},render:function(){var o=k._("Nuevo mensaje");return (h.createElement(i,{ajaxify:new j('/ajax/messaging/composer.php'),className:this.props.className,tooltip:o,rel:"dialog"}));}});e.exports=n;},null);
__d("ChatSidebarConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:28};Object.assign(g,{getImageSize:function(h){if(h===false)return g.IMAGE_SIZE;return g.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(h){if(h===false)return g.IMAGE_SIZE+4;return g.LITESTAND_CLASSIC_SIZE+4;}});e.exports=g;},null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","copyProperties","MercuryConstants"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=b('MercuryConstants').ChatNotificationConstants,l=false,m=h.getWebChatNotification(),n=l,o=true,p=j(new g(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return m!==k.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return n;},showsTabUnreadUI:function(){return o;}});function q(){p.inform(p.ON_CHANGED);}h.subscribe(i.ON_CHAT_NOTIFICATION_CHANGED,function(){var r=m,s=h.getWebChatNotification();m=s;if(r!=s)q();});g.subscribe('chat/set_does_page_occlude_tabs',function(r,s){n=!!s;q();});g.subscribe('chat/set_show_tab_unread_ui',function(r,s){o=!!s;q();});e.exports=p;},null);
__d("ChatSidebarSheet",["ArbiterMixin","BlackbirdUpsell","ChannelConnection","ChannelConstants","ChatBehavior","ChatConfig","ChatVisibility","CSS","DOM","Event","JSLogger","PresencePrivacy","copyProperties","fbt","mixin","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=q.create('sidebar_sheet');function x(da){switch(da){case j.HINT_AUTH:return t._("Tu sesi\u00f3n expir\u00f3. Por favor inicia sesi\u00f3n de nuevo.");case j.HINT_CONN:return t._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[t.param("Chat",t._("Chat"))]);case j.HINT_MAINT:return t._("El {Chat} de Facebook no est\u00e1 disponible por mantenimiento.",[t.param("Chat",t._("Chat"))]);default:return t._("El {Chat} de Facebook no est\u00e1 disponible por el momento.",[t.param("Chat",t._("Chat"))]);}}function y(da){var ea;if(da===null||false===navigator.onLine){ea=t._("No es posible conectar con el chat. Comprueba tu conexi\u00f3n a Internet.");}else if(da>l.get('warning_countdown_threshold_msec')){var fa=o.create('a',{href:'#',className:'fbChatReconnectLink'},t._("Int\u00e9ntalo de nuevo"));ea=t._("No es posible conectar con el chat. {try-again-link}",[t.param("try-again-link",fa)]);}else if(da>1000){ea=t._("No es posible conectar con el chat. Nuevo intento de conexi\u00f3n en {seconds} segundos...",[t.param("seconds",Math.floor(da/1000))]);}else ea=t._("No es posible conectar con el chat. Volviendo a conectar...");return ea;}var z=u(g);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da){"use strict";this._root=da;this._message=o.find(da,'div.fbChatSidebarMessage div.message');i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this._handleConnectionChange.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._render.bind(this));r.subscribe('privacy-user-presence-changed',this._render.bind(this));k.subscribe(k.ON_CHANGED,this._render.bind(this));this._render();}ca.prototype._handleConnectionChange=function(da,ea){"use strict";this._channelStatus=da;this._channelData=ea;this._render();};ca.prototype._renderChannelDisconnect=function(){"use strict";if(this._channelStatus===i.SHUTDOWN){return o.setContent(this._message,x(this._channelData));}else if(this._channelStatus===i.RECONNECTING){var da=this._channelData;o.setContent(this._message,y(da));if(da>1000){if(da>l.get('warning_countdown_threshold_msec'))this._warningMsgEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),'fbChatReconnectLink')){i.reconnect();return false;}});this._showWarningTimeout=v(this._handleConnectionChange.bind(this,i.RECONNECTING,da-1000),1000);}}};ca.prototype._renderOffline=function(){"use strict";var da='fbChatGoOnlineLink',ea=t._("Activa el chat"),fa=o.create('a',{href:'#',className:da},ea),ga=t._("{=Go online} para ver qui\u00e9n est\u00e1 disponible.",[t.param("=Go online",fa)]);o.setContent(this._message,ga);this._goOnlineEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),da)){w.log('sidebar_go_online');m.goOnline();return false;}});};ca.prototype._renderBlackbirdUpsell=function(){"use strict";o.setContent(this._message,h.getOfflineContent());};ca.prototype._renderBlackbird=function(da){"use strict";o.setContent(this._message,h.getBlackbirdContent(da));};ca.prototype._clear=function(){"use strict";if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}if(this._warningMsgEventListener){this._warningMsgEventListener.remove();this._warningMsgEventListener=null;}if(this._goOnlineEventListener){this._goOnlineEventListener.remove();this._goOnlineEventListener=null;}n.removeClass(this._root,'upsell');n.removeClass(this._root,'offline');n.removeClass(this._root,'blackbird');n.removeClass(this._root,'error');n.removeClass(this._root,'notice');o.empty(this._message);};ca.prototype._render=function(){"use strict";this._clear();if(h.shouldShow()){if(m.hasBlackbirdEnabled()){var da=m.isOnline()?'blackbird':'upsell';n.addClass(this._root,da);this._renderBlackbird(r.getVisibility());}else if(!m.isOnline()){n.addClass(this._root,'upsell');this._renderBlackbirdUpsell();}}else if(!m.isOnline()){n.addClass(this._root,'offline');this._renderOffline();}else if(i.disconnected()){n.addClass(this._root,'error');this._renderChannelDisconnect();}else if(!k.notifiesUserMessages()){n.addClass(this._root,'notice');var ea=t._("Las alertas est\u00e1n desactivadas mientras usas otro cliente para chatear.");o.setContent(this._message,ea);}this.inform('updated');};s(ca.prototype,{_channelStatus:null,_channelData:null,_showWarningTimeout:null,_warningMsgEventListener:null,_goOnlineEventListener:null});e.exports=ca;},null);
__d("SidebarFitWindowHeight",["Arbiter","ArbiterMixin","Event","Style","SubscriptionsHandler","TinyViewport","Vector","mixin","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this.$SidebarFitWindowHeight0=t;this.onViewportUpdate();l.subscribe('change',this.onViewportUpdate.bind(this));}s.prototype.onViewportUpdate=function(){"use strict";if(l.isTiny()){this.onScroll();var t=this.onScroll.bind(this);this.$SidebarFitWindowHeight1=new k();this.$SidebarFitWindowHeight1.addSubscriptions(i.listen(window,'scroll',t),g.subscribe('dom-scroll',t));}else{if(this.$SidebarFitWindowHeight2!==0){j.set(this.$SidebarFitWindowHeight0,'margin-top','0');this.$SidebarFitWindowHeight2=0;}this.$SidebarFitWindowHeight1&&this.$SidebarFitWindowHeight1.release();}};s.prototype.onScroll=function(){"use strict";o(this.updateScrollPosition.bind(this),this.resizeSidebar.bind(this),'SidebarFitWindowHeight/scroll');};s.prototype.updateScrollPosition=function(){"use strict";this.$SidebarFitWindowHeight3=m.getScrollPosition().y;this.$SidebarFitWindowHeight4||(this.$SidebarFitWindowHeight4=this.$SidebarFitWindowHeight0.offsetHeight);};s.prototype.resizeSidebar=function(){"use strict";var t=-Math.max(Math.min(this.$SidebarFitWindowHeight3,this.$SidebarFitWindowHeight4),0);j.set(this.$SidebarFitWindowHeight0,'margin-top',t+'px');if(t!=this.$SidebarFitWindowHeight2){this.$SidebarFitWindowHeight2=t;this.inform('resized',t);}};s.prototype.getOffset=function(){"use strict";return this.$SidebarFitWindowHeight2;};e.exports=s;},null);
__d("ChatSidebar",["Arbiter","ArbiterMixin","AsyncRequest","Banzai","BanzaiLogger","Bootloader","BootloaderConfig","ChatConfig","ChatImpressionLogger","ChatOptions","ChatSidebarComposeLink.react","ChatSidebarConstants","ChatSidebarSheet","CSS","DOM","DOMDimensions","Event","JSLogger","KeyEventController","LitestandClassicPlaceHolders","MercuryConfig","OrderedFriendsList","Parent","PresencePrivacy","React","ScrollableArea","SidebarFitWindowHeight","Style","ViewportBounds","copyProperties","createArrayFromMixed","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){b.__markCompiled&&b.__markCompiled();var qa,ra=null,sa,ta=false,ua=false,va=false,wa=false,xa=false,ya=false,za,ab,bb=false,cb,db,eb,fb,gb,hb,ib,jb=null,kb,lb=x.create('chat_sidebar'),mb='succeeded',nb=null;function ob(){t.removeClass(document.documentElement,'sidebarMode');if(!xa||(!zb.isVisible()&&!wa)){g.inform('reflow');return;}va=false;wa=false;jb=null;fb.hide();hb.getCore().reset();t.hide(db);if(bb){t.hide(ab);t.hide(cb);t.removeClass(document.documentElement,'miniSidebar');t.removeClass(db,"_51xq");za&&za.setProps({shown:false},function(){return ub(false);});lb.log('minisidebar_hide');}else lb.log('sidebar_hide');g.inform('sidebar/hide',zb);g.inform('reflow');}function pb(){var ac=zb.shouldShowSidebar(),bc=zb.shouldShowMiniSidebar();if(zb.isEnabled()&&(ac||bc)){if(ac){sb();tb();}else vb();}else ob();if(!xa){yb();xa=true;}jb=null;}function qb(){if(hb&&zb.isVisible())hb.getCore().getElement().focus();}function rb(ac){var bc=ib.height;ac.forEach(function(cc){if(cc&&cc!==qa)bc-=v.getElementDimensions(cc).height;});if(kb)bc-=kb.getOffset();if(gb)bc-=v.getElementDimensions(gb).height;return Math.max(0,bc);}function sb(){if(zb.isVisible())return;if(bb){t.hide(ab);t.show(cb);t.removeClass(document.documentElement,'miniSidebar');t.removeClass(db,"_51xq");za&&za.setProps({shown:false},function(){return ub(false);});}va=true;wa=false;jb=null;t.show(db);t.addClass(document.documentElement,'sidebarMode');fb.show();lb.log('sidebar_show');g.inform('sidebar/show',zb);z.destroy('sidebar');}function tb(){var ac=rb(ka(cb.childNodes)),bc=fb.getItemHeight(),cc=8,dc=Math.floor((ac-cc)/bc);ha.set(qa,'height',ac+'px');fb.setNumTopFriends(dc);var ec=Math.floor((ac-cc)/bc);ec=(ec-2)>0?ec-2:0;hb.getData().setMaxResults(ec);g.inform('sidebar/resized',zb);g.inform('reflow');}function ub(ac){if(db===null)return;t.conditionClass(db,"_2e4g",ac);}function vb(){t.hide(cb);t.show(ab);t.show(db);t.addClass(document.documentElement,'sidebarMode');t.addClass(document.documentElement,'miniSidebar');t.addClass(db,"_51xq");var ac=rb([]),bc=r.getItemHeight(true),cc=Math.floor(ac/bc)-4;if(!za){l.loadModules(["ChatMiniSidebar.react","ChatMiniSidebarSearchSource"],function(dc,ec){if(!sa)sa=new ec({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});za=ea.render(ea.createElement(dc,{dataSource:sa,height:ac,maxEntries:Math.max(cc,0),onClickSearch:ub,onToggleSidebar:zb.toggle,shown:true}),ab);});}else za.setProps({height:ac,maxEntries:Math.max(cc,0),shown:true});va=false;wa=true;z.destroy('sidebar');lb.log('minisidebar_show');g.inform('minisidebar/show',zb);g.inform('reflow');}function wb(){p.setSetting('sidebar_mode',zb.isEnabled(),'sidebar');new i('/ajax/chat/settings.php').setHandler(oa).setErrorHandler(oa).setData({sidebar_mode:zb.isEnabled()}).setAllowCrossPageTransition(true).send();}function xb(){return ba.getActiveList().length<=n.get('sidebar.min_friends');}function yb(){var ac=true;if(!zb.isEnabled()){lb.log('state_not_enabled');ac=false;}if(!zb.isViewportCapable())if(!bb){lb.log('state_not_shown_viewport');ac=false;}else if(!zb.isViewportCapableForMiniSidebar()){lb.log('state_not_shown_viewport_mini');ac=false;}if(ua){lb.log('state_not_shown_hidden');ac=false;}if(xb()){lb.log('state_not_shown_num_friends');ac=false;}lb.log(ac?'state_shown':'state_not_shown');}var zb={init:function(ac,bc,cc,dc){zb.init=oa;ya=true;db=ac;fb=bc;hb=cc;eb=dc;qa=u.find(ac,'div.fbChatSidebarBody');ab=u.find(ac,"._51x-");cb=u.find(ac,"._51x_");gb=u.find(ac,"._5qqe");bb=n.get('www_mini_sidebar',false);var ec=u.find(ac,"._x1u");ec&&ea.render(ea.createElement(q,{className:"_3a-4 _5q85"}),ec);w.listen(window,'resize',pb);y.registerKey('q',function(event){if(va){if(!ra)ra=u.scry(ac,'.inputsearch')[0];if(ra){ra.focus();event.prevent();}}});var fc=new s(ac);fc.subscribe('updated',pb);fb.setScrollContainer(ca.byClass(fb.getRoot(),'uiScrollableAreaWrap'));fb.subscribe(['render','show','hide'],na(function(hc){var ic=fa.getInstance(fb.getRoot());ic&&ic.adjustGripper();}));g.subscribe('chat/option-changed',function(hc,ic){if(ic.name=="sidebar_mode"){ta=!!p.getSetting('sidebar_mode');pb();}if(ic.name==='hide_groups')pb();});cc.getCore().subscribe('sidebar/typeahead/active',zb.updateOnActiveTypeahead);if(aa.SidebarClearTypeaheadGK){cc.subscribe('blur',function(){if(!fb.isVisible())zb.updateOnActiveTypeahead(null,false);});cc.subscribe('focus',function(){if(fb.isVisible()&&cc.getCore().getValue())zb.updateOnActiveTypeahead(null,true);});}cc.subscribe('reset',function(){if(!cc.getCore().getValue()&&!fb.isVisible())zb.updateOnActiveTypeahead(null,false);});g.subscribe('buddylist-nub/initialized',function(hc,ic){w.listen(ic.getButton(),'click',function(event){var jc=ua;ua=false;zb.enable();var kc=zb.shouldShowSidebar()||zb.shouldShowMiniSidebar();ua=jc&&!kc;return !kc;});});ta=!!p.getSetting('sidebar_mode');da.subscribe('privacy-user-presence-changed',pb);pb();o.init(fb);ia.addPersistentRight(zb.getVisibleWidth);zb.inform('sidebar/initialized',zb,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',zb,g.BEHAVIOR_PERSISTENT);kb=new ga(gb);kb.subscribe('resized',pb);if(n.get('chat_sidebar_load_log')){var gc={event:mb,session_token:dc.session_token,country_code:dc.viewer_country_code,buddylist_short:n.get('buddylist_short_group'),bootloader_retry:m.retry_on_timeout};if(!nb)nb=k.create(ja({retry:true},j.VITAL));nb.log('MessagesSidebarLoadLoggerConfig',gc);}},updateOnActiveTypeahead:function(ac,bc){if(!va)return;if(bc){fb.hide();}else{hb.getView().clearContent();fb.show();pb();}},isInitialized:function(){return xa;},disable:function(){if(!zb.isEnabled())return;ta=false;wb();ob();},enable:function(){if(zb.isEnabled())return;ta=true;wb();pb();setTimeout(qb,0);},ensureLoaded:function(){if(!ta)return;if(ya)return;if(pa('pagelet_sidebar'))return;d(['UIPagelet'],function(ac){var bc=u.create('div',{id:'pagelet_sidebar'});u.appendContent(document.body,bc);ac.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});ya=true;},hide:function(){if(ua)return;ua=true;ob();},unhide:function(){if(!ua)return;ua=false;pb();},getBody:function(){return qa;},getRoot:function(){return db;},getVisibleWidth:function(){if((!va&&!wa)||!db)return 0;if(jb===null){jb=db.offsetWidth;if(wa)jb=206;}return jb;},isEnabled:function(){return ta;},isViewportCapable:function(){ib=v.getViewportWithoutScrollbarDimensions();var ac=n.get('sidebar.minimum_width');return ib.width>ac;},shouldShowSidebar:function(){var ac=zb.isViewportCapable();return ac&&!ua&&!xb();},isViewportCapableForMiniSidebar:function(){ib=v.getViewportWithoutScrollbarDimensions();var ac=n.get('sidebar.minimum_width'),bc=n.get('minisidebar.minimum_width');return ib.width>bc&&ib.width<=ac;},shouldShowMiniSidebar:function(){if(!bb)return false;var ac=zb.isViewportCapableForMiniSidebar();return ac&&!ua&&!xb();},isVisible:function(){return va;},resize:pb,toggle:function(){zb.isEnabled()?zb.disable():zb.enable();}};ja(zb,h);e.exports=zb;},null);
__d("ChatMiniSidebarSearchSource",["AbstractSearchSource","AsyncRequest","ChatSortUsers","CurrentUser","MercuryParticipantTypes","OrderedFriendsList","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","copyProperties","emptyFunction","isValidUniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';for(var t in g)if(g.hasOwnProperty(t))v[t]=g[t];var u=g===null?null:g.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=g;function v(w){this.$ChatMiniSidebarSearchSource0=new n({parseFn:p.parse,matchFn:p.isQueryMatch,indexFn:w.indexFn});this.$ChatMiniSidebarSearchSource1=[];this.$ChatMiniSidebarSearchSource2=w.queryRequests||[];this.$ChatMiniSidebarSearchSource3=false;}v.prototype.bootstrapImpl=function(w){o.fetchAll().then(function(){this.$ChatMiniSidebarSearchSource3=true;this.$ChatMiniSidebarSearchSource4();w();}.bind(this));};v.prototype.searchImpl=function(w,x,y){var z=null,aa={},ba=y&&y.onQueryFinished,ca=y&&y.onQueryStarted;ca&&ca(w);var da=this.$ChatMiniSidebarSearchSource0.search(w,function(ga){if(!z){z=ga;z.forEach(function(ha){return aa[ha.getUniqueID()]=true;});}else ga.forEach(function(ha){var ia=ha.getUniqueID();if(!aa[ia]){z.push(ha);aa[ia]=true;}});x(z,w);if(w.length===1&&this.$ChatMiniSidebarSearchSource3)ba&&ba(w);}.bind(this),y);if(!da||!this.$ChatMiniSidebarSearchSource2||!this.$ChatMiniSidebarSearchSource2.length||w.length===0){ba&&ba(w);return;}if(w.length===1){if(this.$ChatMiniSidebarSearchSource3)ba&&ba(w);return;}var ea={value:w,existing_ids:z&&z.map(function(ga){return ga.getUniqueID();}).join(','),needs_friends:!this.$ChatMiniSidebarSearchSource3,limit:y.threadLimit},fa=this.$ChatMiniSidebarSearchSource2.length;this.$ChatMiniSidebarSearchSource2.forEach(function(ga){this.$ChatMiniSidebarSearchSource5(ea,ga,function(ha){this.$ChatMiniSidebarSearchSource6(this.$ChatMiniSidebarSearchSource7(this.$ChatMiniSidebarSearchSource8(ha)),w);fa--;if(fa===0){this.$ChatMiniSidebarSearchSource0.setQueryStringAsExhausted(w);ba&&ba(w);}}.bind(this));}.bind(this),this);};v.prototype.getBootstrappedEntries=function(w){return this.bootstrap(function(){return w(this.$ChatMiniSidebarSearchSource1||[]);}.bind(this));};v.prototype.getAllEntriesMap=function(){return this.$ChatMiniSidebarSearchSource0.getAllEntries();};v.prototype.$ChatMiniSidebarSearchSource4=function(){var w=o.getCachedProfileIDs(),x=w.filter(function(z){var aa=o.getNow(z);return (z==j.getID()||aa.type===k.FRIEND);});x.sort(i.sort);var y=x.map(this.$ChatMiniSidebarSearchSource9);this.$ChatMiniSidebarSearchSource0.addLocalEntries(y);if(y.length)this.$ChatMiniSidebarSearchSource1=this.$ChatMiniSidebarSearchSource1.concat(y);};v.prototype.$ChatMiniSidebarSearchSource7=function(w){return w.map(this.$ChatMiniSidebarSearchSourcea,this);};v.prototype.$ChatMiniSidebarSearchSourcea=function(w,x){if(w.mercury_thread)return l.normalizeThreadEntry(w,x);var y=w.text,z=w.uid;if(!y||!s(z))return null;return new m({uniqueID:z,title:y,order:l.getActiveRank(z),subtitle:w.subtext,type:w.render_type||w.type,photo:w.photo,uri:w.path,auxiliaryData:{isMessengerUser:w.is_messenger_user}});};v.prototype.$ChatMiniSidebarSearchSource8=function(w){var x=w.getPayload();if(Array.isArray(x)){return x;}else if(x&&x.entries){return x.entries;}else return [];};v.prototype.$ChatMiniSidebarSearchSource9=function(w,x){var y=o.getNow(w),z=w==j.getID()?k.FRIEND:y.type,aa=[y.additionalName,y.alternateName].concat(y.searchTokens||[]).join(' ');return new m({uniqueID:w,title:y.name,order:x,subtitle:y.additionalName,keywordString:aa,type:z,photo:y.thumbSrc,uri:y.uri,auxiliaryData:{isMessengerUser:y.is_messenger_user}});};v.prototype.$ChatMiniSidebarSearchSource5=function(w,x,y,z){new h(x.uri).setData(q({},w,x.data)).setMethod('GET').setReadOnly(true).setHandler(y).setErrorHandler(z||r).setAllowCrossPageTransition(true).send();};v.prototype.$ChatMiniSidebarSearchSource6=function(w,x){if(w.length)this.$ChatMiniSidebarSearchSource0.addQueryEntries(w,x);};v.prototype.addLocalEntries=function(w){this.$ChatMiniSidebarSearchSource0.addLocalEntries(w);};v.prototype.refreshData=function(){o.fetchAll();d(['AvailableList'],function(w){return w.update();});};e.exports=v;},null);
__d("ChatTypeaheadBehavior",["ChatOpenTab","CSS","MercuryConfig","Parent","Rect","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(p,q){var r=j.byClass(p,"_4oes");if(r)h.conditionClass(r,"_5q83",q);}function o(p){"use strict";this._typeahead=p;}o.prototype.enable=function(){"use strict";var p=this._typeahead;this._subscriptions=[p.subscribe('focus',function(){p.getData().refreshData();n(p.getElement(),true);}),p.subscribe('blur',function(q){if(!i.SidebarClearTypeaheadGK)p.getCore().reset();n(p.getElement(),false);}),p.subscribe('respond',function(q,r){if(r.value&&r.value===p.getCore().getValue()){if(!r.results.length){var s=r.value.toLowerCase(),t=p.getData().getQueryCache();if(!r.isAsync&&!t.hasOwnProperty(s))return;p.getView().showNoResults();}h.addClass(p.getElement(),'hasValue');}}),p.subscribe('reset',function(){h.removeClass(p.getElement(),'hasValue');}),p.subscribe('select',function(q,r){var s=r.selected.uid;if(r.selected.mercury_thread&&!r.selected.mercury_thread.is_canonical)s=r.selected.mercury_thread.thread_fbid;p.getView().hide();g.openTabByType(s,r.selected.type,'typeahead');}),p.subscribe('highlight',function(q,r){if(r.index>=0){var s=p.getView().getItems()[r.index];if(s){var t=new k(s),u=s.offsetParent,v=t.boundWithin(new k(u)).getPositionVector();t.getPositionVector().sub(v).scrollElementBy(u);}}})];};o.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(p){this._typeahead.unsubscribe(p);},this);this._subscriptions=null;};l(o.prototype,{_subscriptions:null});e.exports=o;},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestRejectedMessage.react",["AsyncRequest","Link.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (i.createElement("div",null,l._("{receiver} declined your invite to play {app_name}.",[l.param("receiver",i.createElement("span",{className:"_dg4"},this.props.receiver.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (i.createElement("div",null,l._("You declined an invite from {sender} to play {app_name}.",[l.param("sender",i.createElement("span",{className:"_dg4"},this.props.sender.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))]),i.createElement("div",{className:"_13n7"},i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockApp},l._("Block {app}",[l.param("app",this.props.app.name)]))),i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockUser},l._("Block requests from {sender}",[l.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new j('/games/block_app/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new j('/games/block_user/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});e.exports=o;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestCanceledMessage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,i._("{sender} canceled an invitation to play {app name}.",[i.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",k(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",k(this.props.timeRemaining))])));}});e.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=j,x=w.PropTypes,y=j.createClass({displayName:"SyncRequest",propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(v(k)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===k.PENDING){var z=g.subscribe(i.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===k.PENDING){var ba=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===k.PENDING)ca.status=k.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case k.PENDING:var aa;if(!this.state.viewerIsSender){aa=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:u._("Aceptar")}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:u._("Rechazar")})];}else aa=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:u._("Cancelar")});z=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},aa)));break;case k.ACCEPTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new h().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=y;},null);
__d("updatePhotoProgressBar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,event){if(event.loaded!=event.total){h.setPosition(50*event.loaded/event.total);}else{h.setPosition(50);h.setTarget(100,2000);}}e.exports=g;},null);
__d("WebMessengerEvents",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});e.exports=i;},null);
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=new g('webmessenger');e.exports=h;},null);
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;},null);
__d("WebMessengerWidthControl",["Arbiter","CSS","CSSClassTransition","DOM","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","csx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;q.addSubscriptions(l.listen(window,'resize',y(x(la,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),g.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=o.getRight()+o.getLeft();ra=ra||qa||0;var sa=k.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');h.removeClass(document.body,"_5uj5");ja&&p.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&h.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(h.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){m.set(j.find(document,"div._uaw"),'width',pa);m.set(r('globalContainer'),'width',pa);}function oa(){if(!ha)ha=h.hasClass(document.body,"_6nw");return ha;}i.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(n(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});e.exports=ka;},null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","copyProperties","csx","emptyFunction","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();b('WebMessengerWidthControl');function w(){}t(w,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(x){this.init=v;this.rootEl=x;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(x,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));r.subscribe(['show','hide'],function(y,z){var aa=z.getActive();if(!n.contains(x,aa))return;if(l.hasClass(aa,'fbNub')){this.notifyNub(aa,y);if(y==='show')this._resizeNubFlyout(aa);}else{var ba=o.byClass(aa,'fbNubFlyout');if(ba)l.conditionClass(ba,'menuOpened',y==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=s.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+s.getElementDimensions(this.rootEl).y;var x=n.scry(document,"div._4f7n")[0];if(x){var y=q.isFixed(x)?'viewport':'document';this.flyoutHeightOffset+=s.getElementPosition(x,y).y+s.getElementDimensions(x).y;}},toggle:function(x){var y=this._findFlyout(x);if(!y)return;this.subscribe('init',function(){r.toggle(x);});},show:function(x){this.subscribe('init',function(){r.show(x);});},showNub:function(x){l.show(x);},hide:function(x){this.subscribe('init',function(){var y=r.getInstance(x);n.contains(x,y.getActive())&&y.hide();});},hideNub:function(x){l.hide(x);this.hide(x);},setUseMaxHeight:function(x,y){l.conditionClass(x,'maxHeight',y!==false);this._resizeNubFlyout(x);},_resizeNubFlyout:function(x){var y=this._findFlyout(x);if(!y||!(l.hasClass(x,'openToggler')||l.hasClass(x,'opened')))return;var z=n.find(y,'div.fbNubFlyoutOuter'),aa=n.find(z,'div.fbNubFlyoutInner'),ba=n.find(aa,'div.fbNubFlyoutBody'),ca=p.getTop(ba),da=ba.offsetHeight;q.set(ba,'height','auto');var ea=s.getElementDimensions(y),fa=s.getElementDimensions(ba),ga=this.getMaxFlyoutHeight(x);q.set(y,'max-height',ga+'px');q.set(z,'max-height',ga+'px');ea=s.getElementDimensions(y);var ha=s.getElementDimensions(aa),ia=ha.y-fa.y,ja=ea.y-ia,ka=parseInt(ba.style.height||ba.clientHeight,10),la=ja!==ka;if(ea.y>ia&&la)q.set(ba,'height',ja+'px');l.removeClass(y,'swapDirection');var ma=s.getElementPosition(y).x;l.conditionClass(y,'swapDirection',function(){if(ma<0)return true;return (ma+ea.x>this.viewportDimensions.x);}.bind(this)());if(la&&ca+da>=fa.y){p.setTop(ba,ba.scrollHeight);}else p.setTop(ba,ca);this.notifyNub(x,'resize');},getMaxFlyoutHeight:function(x){var y=this._findFlyout(x),z=s.getElementPosition(y,'viewport'),aa=s.getElementDimensions(y),ba=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-z.y-aa.y);return Math.max(ba,0);},resizeAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this._resizeNubFlyout(x[y]);},hideAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this.hide(x[y]);},_getAllNubs:function(){var x=n.scry(this.rootEl,"div._50-v.openToggler");return x.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var x=event.getTarget(),y=o.byClass(x,'fbNub');if(y){if(o.byClass(x,'fbNubFlyoutTitlebar')){var z=o.byTag(x,'a'),aa=x.nodeName=='INPUT'&&x.getAttribute('type')=='submit';if(!z&&!aa){this.hide(y);return false;}}this.notifyNub(y,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(x){return l.hasClass(x,'fbNubFlyout')?x:n.scry(x,'div.fbNubFlyout')[0]||null;},registerNubController:function(x,y){m.set(x,'dock:nub:controller',y);y.subscribe('nub/button/content-changed',h(this.inform,this,'resize',x));y.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,x));},unregisterNubController:function(x){m.remove(x,'dock:nub:controller');},notifyNub:function(x,y,z){var aa=m.get(x,'dock:nub:controller');aa&&aa.inform(y,z);}});e.exports=a.Dock||w;},null);
__d("LeafletMarker.react",["GeoCoordinates","leaflet","LeafletUtils","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=j.createClass({displayName:"LeafletMarker",propTypes:{options:m.object,coordinates:m.instanceOf(g).isRequired},statics:{mutate:function(o,p,q){var r=q.options||{},s=r.opacity,t=r.zIndex,u=(function(z,aa){var ba={},ca=Object.prototype.hasOwnProperty;if(z==null)throw new TypeError();for(var da in z)if(ca.call(z,da)&&!ca.call(aa,da))ba[da]=z[da];return ba;})(r,{opacity:1,zIndex:1}),v=p.options||{},w=v.opacity,x=v.zIndex,y=(function(z,aa){var ba={},ca=Object.prototype.hasOwnProperty;if(z==null)throw new TypeError();for(var da in z)if(ca.call(z,da)&&!ca.call(aa,da))ba[da]=z[da];return ba;})(v,{opacity:1,zIndex:1});if(!k(y,u))return false;if(w!==s)o.setOpacity(w);if(x!==t)o.setZIndex(x);if(p.coordinates!==q.coordinates)o.setLatLng(i.toLatLng(p.coordinates));return true;},toLayer:function(o){return h.marker(i.toLatLng(o.coordinates),o.options);}},render:function(){return null;}});e.exports=n;},null);
__d("WaterfallIDGenerator",["CurrentUser","md5"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){var l=2147483647;return Math.random()*l;}function j(){return Math.floor(Date.now()/1000);}var k={generate:function(){return h([g.getID(),j(),i()].join(':'));}};e.exports=k;},null);
__d("FBRTCStruct",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(i,j,k){var l,m;if(typeof i=='string'||i instanceof String){m=i;l=i;}else for(var n in i)if(i.hasOwnProperty(n))if(n==='index'){k=i[n];}else{m=n;l=i[n];}j[m]=k;j.strNames[k]=l;};function h(i){"use strict";this.strNames=[];for(var j=0;j<i.length;j++)g(i[j],this,j);}e.exports=h;},null);
__d("FBRTCCallUI",["BanzaiLogger","Cookie","UserAgent","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCLogger","FBRTCUrlManager","pageID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=null,q={openAsCaller:function(r,s,t,u){if(!p&&window.rtcCallChildWindow){p=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(r)){p.focus();return;}if(this._shouldCloseCallWindow())p.close();g.log('VideoCallLoggerConfig',{event:'open_as_caller'});m.getInstance().logCallAction(r,s,m.CallAction.START_CALL,null,t);var v=new j({peerID:r,callID:s,isCaller:true});v.onCallStarted(t);this._open(r,s,true,v,false,u);},openAsCallee:function(r,s,t,u,v){g.log('VideoCallLoggerConfig',{event:'open_as_callee'});this._open(r,s,false,t,u,v);},_shouldFocusCallWindow:function(r){return p&&!p.closed&&p.rtcCallInProgessWith===r;},_shouldCloseCallWindow:function(){return p&&!p.closed&&!p.rtcCallInProgessWith;},_open:function(r,s,t,u,v,w){h.clear('vcpwn');h.clear('vctid');var x=this._windowPosition(),y=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',x.height,x.width,x.top,x.left].join(',');if(this._isSparkBrowser())y='';u.addExtraInfo(m.Key.INITIATED_BY_PAGE_ID,o);u.onCallEnded(l.CallEndReason.CLIENT_ERROR,false,true,'PopupPending');u.save(k.getInstance());g.log('VideoCallLoggerConfig',{event:'open_popup'});if(!v){p=window.open('','Video Call',y);this._setUri(p,r,s,t,w);}else{m.getInstance().logCallAction(r,s,m.CallAction.OPEN_POPUP);p=window.open(v,'Video Call',y);}if(window.focus)p.focus();},_setUri:function(r,s,t,u,v){n.getCallUri(s,t,u,v,function(w){m.getInstance().logCallAction(s,t,m.CallAction.OPEN_POPUP);r.location=w;},function(){m.getInstance().logCallAction(s,t,m.CallAction.FAILED_GETTING_URI);});},_windowPosition:function(){var r=933,s=700,t,u,v,w;if(window.innerWidth!==(void 0)){u=window.innerWidth;t=window.innerHeight;}else{u=screen.width;t=screen.height;}if(window.screenLeft!==(void 0)){v=window.screenLeft;w=window.screenTop;}else{v=window.screenX;w=window.screenY;}var x=Math.floor(((u/2)-(r/2))+v),y=Math.floor(((t/2)-(s/2))+w);return {height:'height='+s.toString(),width:'width='+r.toString(),top:'top='+y.toString(),left:'left='+x.toString()};},_isSparkBrowser:function(){return i.isBrowser('Chrome < 34')&&i.isBrowser('Chrome > 33');}};e.exports=q;},null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=null,o={init:function(s){if(!n)h.init(s);},play:function(s,t,u){if(n){i.playRemote(n.contentWindow,s,t,false);}else i.playLocal(s,t,u);},stop:function(s){if(!n)h.stop(s);}},p=new k(location.href);if(p.getSubdomain()&&p.getSubdomain()!=='www')p.setSubdomain('www');var q=p.getDomain();function r(){if(l.ie()<9)return false;if(g.RPC_DISABLED)return false;return j.isSupported()&&i.supportsRPC();}if(m(p)&&location.host!==q&&r()){n=document.createElement('iframe');n.setAttribute('src','//'+q+'/sound_iframe.php');n.style.display='none';document.body.appendChild(n);}e.exports=o;},null);
__d("FBRTCUnsupportedBrowserMessage",["AsyncDialog","AsyncRequest","XBrowserNotSupportedDialogController","FBRTCSoundController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={_dialog:null,warnForOutgoingCall:function(l){var m=i.getURIBuilder().setBool('warning',true).getURI();this._presentDialog(m,l);},showForOutgoingCall:function(){var l=i.getURIBuilder().getURI();this._presentDialog(l);},showForIncomingCall:function(l,m){j.playIncomingRingtone(l,m,false);var n=i.getURIBuilder().setInt('user_id',m).getURI();this._presentDialog(n);},dismiss:function(){if(this._dialog)this._dialog.hide();},_presentDialog:function(l,m){if(this._dialog)return;var n=new h(l);g.send(n,function(o){this._dialog=o;o.subscribe('hide',function(){this._dialog=null;if(m)m();}.bind(this));}.bind(this));}};e.exports=k;},null);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='scraperLastPermissiveMatch',n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.input=r;this.enable();this.getValueFn=s;}q.prototype.reset=function(){"use strict";h.set(this.input,m,null);};q.prototype.enable=function(){"use strict";if(this.events)return;var r=function(s){setTimeout(this.check.bind(this,s),30);};this.events=i.listen(this.input,{paste:r.bind(this,false),keydown:r.bind(this,true)});};q.prototype.disable=function(){"use strict";if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};q.prototype.check=function(r){"use strict";var s=this.getValueFn?this.getValueFn():this.input.value;if(r&&q.trigger(s))return;var t=q.match(s),u=j.permissiveMatch(s);if(u&&(u!=h.get(this.input,m))){h.set(this.input,m,u);this.inform('match',{url:t||u,alt_url:u});}};k(q,j);e.exports=q;},null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryViewer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isOutbound:function(j){return j.author===h.getID();},isInbound:function(j){return !i.isOutbound(j);},isSending:function(j){return (j.status===g.UNSENT||j.status===g.UNCONFIRMED||j.status===g.UNABLE_TO_CONFIRM||j.status===g.RESENDING);},hasError:function(j){return (j.status===g.FAILED_UNKNOWN_REASON||j.status===g.UNABLE_TO_CONFIRM||j.status===g.ERROR);}};e.exports=i;},null);
__d("MercuryErrorInfo",["MercuryErrorType","MercuryMessageInfo","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getMessage:function(k){var l='';if(j.isConnectionError(k)){l=i._("Este mensaje no se envi\u00f3.");if(j.isTransient(k))l=i._("{message} Comprueba tu conexi\u00f3n a internet y haz clic para intentarlo de nuevo.",[i.param("message",l)]);}else{if(k&&k.description){l=k.description;}else l=i._("No se pudo enviar este mensaje.");if(j.isTransient(k))l=i._("{message} Haz clic para enviar de nuevo.",[i.param("message",l)]);}return l;},isConnectionError:function(k){if(k&&k.type==g.TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function(k){return k&&k.is_transient;},isPermanent:function(k){return k?!this.isTransient(k):false;},hasErrorStatus:function(k){return h.hasError(k);}};e.exports=j;},null);
__d("MercuryThreadMetadataRawRenderer",["Event","CSS","DOM","MercuryActionStatus","MercuryErrorInfo","MercuryStatusTemplates","Tooltip","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={renderParticipantListWithNoThreadName:function(q,r,s,t,u,v){var w={callback:true,check_length:true,show_unread_count:true};v=v||{};var x={};for(var y in v)if(w[y]){x[y]=v[y];delete v[y];}var z=s.map(function(ea){return t[ea];}),aa=this.renderRawParticipantList(q,z,s.length,v);aa=this.renderRawTitleWithUnreadCount(aa,x.show_unread_count?r.unread_count:0);var ba=v.abbr_mode,ca={};for(var da in v)ca[da]=v[da];ca.abbr_mode=true;u.forEach(function(ea){var fa=u.length>1?this._cloneIfDOMElement(aa):aa;i.setContent(ea,fa);if(x.check_length&&!ba&&ea.scrollWidth>ea.clientWidth){var ga=this.renderRawParticipantList(q,z,s.length,ca),ha=this.renderRawTitleWithUnreadCount(ga,x.show_unread_count?r.unread_count:0);i.setContent(ea,ha);}}.bind(this));x.callback&&x.callback(aa);},renderRawParticipantList:function(q,r,s,t){var u={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};t=t||{};var v=null;if(t.names_renderer){v=t.names_renderer(r);}else v=r.map(function(x){return x.name;});var w=null;if(v.length===0){if(!q){w=o._("Nuevo mensaje");}else w=o._("No hay participantes");}else if(v.length==1){w=v[0];}else if(v.length==2){if(t.last_separator_uses_and){w=o._("{participant1} y {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else w=o._("{participant1}, {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else if(t.last_separator_uses_and){if(t.abbr_mode){w=o._("{participant1} y {others_link}",[o.param("participant1",v[0]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-1}))]);}else if(v.length==3){w=o._("{participant1}, {participant2} y {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2} y {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-2}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}, {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2}, {participant3}, {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-3}))]);if(Array.isArray(w))w=i.create('span',{},w);return w;},renderRawTitleWithUnreadCount:function(q,r){var s=q;if(r&&r>1)s=i.create('span',{},o._("{conversation_title} ({unread_count})",[o.param("conversation_title",q),o.param("unread_count",r)]));return s;},renderRawParticipantCount:function(q){var r=q.render_subset,s;if(!r){s=q.count>1?o._({"*":"{num} personas"},[o.param("num",q.count,[0])]):o._("Una persona");}else s=q.count>1?o._({"*":"{others_count} personas m\u00e1s"},[o.param("others_count",q.count,[0])]):o._("una persona m\u00e1s");return s;},renderShortNames:function(q){if(q.length==1)return [q[0].name];return q.map(function(r){return r.short_name;});},renderStatusIndicator:function(q,r,s){var t;if(q==j.RESENDING){t=this.renderResendIndicator();}else if(q!==(void 0)&&q!=j.UNSENT&&q!=j.UNCONFIRMED&&q!=j.SUCCESS)t=this.renderErrorIndicator(r,s);return t;},renderResendIndicator:function(){return l[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(q,r){if(!q)return null;var s=l[':fb:mercury:error-indicator'].render(),t=q.is_transient,u=k.getMessage(q);if(t)if(k.isConnectionError(q)){u=o._("{message} Comprueba tu conexi\u00f3n a internet y haz clic para intentarlo de nuevo.",[o.param("message",u)]);}else u=o._("{message} Haz clic para enviar de nuevo.",[o.param("message",u)]);m.set(s,u,'above','center');if(r&&t){g.listen(s,'click',r);s.setAttribute('tabindex','0');h.addClass(s,"_55q-");}return s;},_cloneIfDOMElement:function(q){if(q&&q.cloneNode){return q.cloneNode();}else return q;}};e.exports=p;},null);
__d("SpotlightViewerBottomBarGroup",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"SpotlightViewerBottomBarGroup",render:function(){var j=this.props.itemmargin||'right',k=((j=='left'?"marginLeft":'')+(j=='right'?' '+"marginRight":'')+(' '+"_4_8i"));return (g.createElement("div",{className:k},this.props.children));}});e.exports=i;},null);
__d("XStickerPackImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null);
__d("XStickersAddPackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool",defaultValue:false}});},null);
__d("XStickersRemovePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null);
__d("XStickerStateInitialDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/",{});},null);
__d("XStickerStatePackDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null);
__d("XStickerStateStoreDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/store\/",{});},null);
__d("XStickerSearchPromotePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/search\/promotePack\/",{sticker_id:{type:"Int",required:true}});},null);
__d("XStickerSearchNUXSeenController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/searchNUX\/seen\/",{});},null);
__d("XStickerTagDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tag\/data\/",{});},null);
__d("XStickerQueryImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true}});},null);
__d("StickerServerRequests",["AsyncRequest","Promise","XStickerPackImagesController","XStickersAddPackController","XStickersRemovePackController","XStickerStateInitialDataController","XStickerStatePackDataController","XStickerStateStoreDataController","XStickerSearchPromotePackController","XStickerSearchNUXSeenController","XStickerTagDataController","XStickerQueryImagesController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s={addPack:function(u,v,w){var x=j.getURIBuilder().setInt('pack_id',u).setBool('is_promoted',v).getURI();new g(x).setHandler(function(y){return w(y.payload);}).send();},removePack:function(u,v){var w=k.getURIBuilder().setInt('pack_id',u).getURI();new g(w).setHandler(function(x){return v(x.payload);}).send();},getStickersForPack:function(u,v){var w=i.getURIBuilder().setInt('pack_id',u).setInt('sticker_size',v).getURI();return new h(function(x,y){return new g().setURI(w).setMethod("POST").setHandler(function(z){return x(z.payload);}).send();});},getStickersForQuery:function(u,v){new g().setURI(r.getURIBuilder().setString('query',u).getURI()).setMethod("POST").setHandler(function(w){return v(w);}).send();},fetchTrayData:function(u){return t(l.getURIBuilder().getURI(),u,true);},fetchStoreData:function(u){return t(n.getURIBuilder().getURI(),u);},fetchPackData:function(u,v){return t(m.getURIBuilder().setInt('pack_id',u).getURI(),v);},fetchTagData:function(u){return t(q.getURIBuilder().getURI(),u,true);},markSeenSearchNUX:function(){new g(p.getURIBuilder().getURI().toString()).send();},promotePackSentFromSearch:function(u,v){var w=o.getURIBuilder().setInt('sticker_id',u).getURI();t(w,v,true);}};function t(u,v,w){return new h(function(x,y){return new g(u).setHandler(function(z){return x(z.getPayload());}).setAllowCrossPageTransition(w).send();}).then(v);}e.exports=s;},null);
__d("StickerImages",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={},i={},j={},k={getStickerTagsData:function(){return j;},requestStickersForPack:function(l,m,n){if(!l)return;if(!i[l]){i[l]=g.getStickersForPack(l,m);i[l].then(function(o){o.forEach(function(p){return this.cacheSticker(p);}.bind(this));}.bind(this));}i[l].then(function(o){return n(o);});},cacheSticker:function(l){h[l.id]=l;},getSticker:function(l){return h[l];}};e.exports=k;},null);
__d("StickerUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getScaledDimensions:function(h,i,j){var k,l,m;if(i>h){m=j/i;k=h*m;l=i*m;}else{m=j/h;k=h*m;l=i*m;}return {height:Math.round(k),width:Math.round(l)};},capitalizeWords:function(h){var i=h.split(" ");for(var j=0;j<i.length;j++){var k=i[j].charAt(0).toUpperCase();i[j]=k+i[j].substr(1);}return i.join(" ");}};e.exports=g;},null);
__d("StickersDispatcher",["Dispatcher","StickerConstants","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i(new g(),{_handleUpdate:function(l,m){var n=j({payloadSource:l},m);this.dispatch(n);},handleUpdateFromViewActions:function(l){this._handleUpdate(h.PayloadSource.VIEW_ACTION,l);}});e.exports=k;},null);
__d("StickerActions",["BanzaiLogger","StickerConstants","StickersDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={addPack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.ADD_PACK,packID:k}]});},removePack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.REMOVE_PACK,packID:k}]});},selectPack:function(k,l){if(!l)g.log('StickersLoggerConfig',{event:'select_pack',packid:k});i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.SELECT_PACK,packID:k}]});},resetNumNewPacks:function(){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.RESET_NUM_NEW_PACKS}]});}};e.exports=j;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerConstants","StickerImages","StickersDispatcher","StickerServerRequests","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={},p,q,r,s=null,t=0,u={},v=[],w=[],x=[],y=null,z=i.get();if(z)y=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUX,ca={onTrayDataReady:function(fa){if(!q)q=m.fetchTrayData(function(ga){v=ga.packs.map(function(ha){return da(ha);});r=ga.mru;t=ga.num_new_packs;x=ga.tags;});q.then(fa);},onStoreDataReady:function(fa){if(!p)p=m.fetchStoreData(function(ga){w=ga.packs.map(function(ha){return da(ha);});});p.then(fa);},onPackDataReady:function(fa,ga){if(!o[fa])o[fa]=m.fetchPackData(fa,function(ha){da(ha);});o[fa].then(ga);},getPacksInTray:function(){var fa=[],ga;for(var ha=0;ha<v.length;ha++)if(v[ha].id==j.EMOTICON_PACK_ID){ga=v[ha];}else if(v[ha].isMessengerCapable)fa.push(v[ha]);ga&&fa.push(ga);return fa;},getPacksInCommentsTray:function(){var fa=[],ga=[],ha;for(var ia=0;ia<v.length;ia++)if(v[ia].id==j.EMOTICON_PACK_ID){ha=v[ia];}else if(v[ia].isCommentsCapable){fa.push(v[ia]);}else ga.push(v[ia]);var ja=fa.concat(ga);if(ha)ja.push(ha);return ja;},getPacksInComposerTray:function(){return v.filter(function(fa){return fa.isComposerCapable;});},getPackIDsInTray:function(){return v.map(function(fa){return fa.id;});},getPacksInStore:function(){return w.filter(function(fa){return fa.isMessengerCapable;});},getComposerPacksInStore:function(){return w.filter(function(fa){return fa.isComposerCapable;});},getPack:function(fa){return u[fa];},getNumNewPacks:function(){return t;},getFeaturedTags:function(){return x;},resetNumNewPacks:function(){if(t){t=0;this.emit(this.NUM_NEW_PACKS_CHANGED,0);}},addMRUPack:function(){if(r){this._addPackToTray(r);r=null;}},addPack:function(fa){var ga=false;if(u[fa])ga=u[fa].isPromoted;m.addPack(fa,ga,function(ha){this._addPackToTray(ha);}.bind(this));},removePack:function(fa){m.removePack(fa,function(ga){v=v.filter(function(ha){return ha.id!==ga;});u[ga]=g.set(u[ga],{isInTray:false});w=w.map(function(ha){return u[ha.id];});this.emit(this.PACKS_CHANGED,ga);}.bind(this));},setTrayPackID:function(fa){y=fa;i.doSync();this.emit(ca.PACK_SELECTED,fa);},getTrayPackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUX:function(){return ba;},clearShowStickerSearchNUX:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(fa,ga){da(fa);u[fa.id]=g.set(u[fa.id],{isPurchased:!ga,isInTray:true});var ha=v.filter(function(ja){return ja.id===fa.id;}).length>0;if(!ha){var ia;if(!ga){ia=v.filter(function(ja){return ja.isMRU||ja.isSearch;}).length;}else ia=v.filter(function(ja){return ja.id!==j.EMOTICON_PACK_ID;}).length;v.splice(ia,0,u[fa.id]);}w=w.map(function(ja){return u[ja.id];});this.emit(this.PACKS_CHANGED,fa.id);},_addRecentlyUsedSticker:function(fa){for(var ga=0;ga<s.length;++ga)if(s[ga].id===fa.id){s.splice(ga,1);break;}s.unshift(fa);},getMRUStickerPack:function(fa){if(!s)s=fa;return s;},updateRecentlyUsed:function(fa){if(!s){this.addMRUPack();return;}this._addRecentlyUsedSticker(k.getSticker(fa));},promotePackSentFromSearch:function(fa){m.promotePackSentFromSearch(fa,function(ga){return ga&&this._addPackToTray(ga,true);}.bind(this));}};l.register(function(fa){if(fa.actions&&fa.actions.length){var ga=j.ActionTypes;fa.actions.forEach(function(ha){switch(ha.actionType){case ga.ADD_PACK:ca.addPack(ha.packID);break;case ga.REMOVE_PACK:ca.removePack(ha.packID);break;case ga.SELECT_PACK:ca.setTrayPackID(ha.packID);break;case ga.RESET_NUM_NEW_PACKS:ca.resetNumNewPacks();break;}});}});ca.PACKS_CHANGED='StickerState/packsChanged';ca.PACK_SELECTED='StickerState/packSelected';ca.NUM_NEW_PACKS_CHANGED='StickerState/numNewPacksChanged';i.registerStateStorer(function(fa){fa.tray_pack_id=y;});function da(fa){var ga=fa.id;if(!u[ga]){return (u[ga]=new g(fa));}else return (u[ga]=g.set(u[ga],fa));}var ea={};ea[ca.PACK_SELECTED]=true;ea[ca.PACKS_CHANGED]=true;ea[ca.NUM_NEW_PACKS_CHANGED]=true;n(ca,ea);e.exports=ca;},null);
__d("AbstractDialogFitHeight",["CSS","DOM","Event","Style","SubscriptionsHandler","Vector","csx","cx","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=450,q=100,r=67,s=67;function t(u){"use strict";this.$AbstractDialogFitHeight0=u;}t.prototype.enable=function(){"use strict";this.$AbstractDialogFitHeight1=new k();this.$AbstractDialogFitHeight1.addSubscriptions(this.$AbstractDialogFitHeight0.subscribe('beforeshow',this.$AbstractDialogFitHeight2.bind(this)),i.listen(window,'resize',o(this.$AbstractDialogFitHeight2.bind(this))));this.$AbstractDialogFitHeight3=h.find(this.$AbstractDialogFitHeight0.getRoot(),"._4-i2");g.addClass(this.$AbstractDialogFitHeight3,"_5pfh");this.$AbstractDialogFitHeight4=q;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight4+=r;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight4+=s;};t.prototype.disable=function(){"use strict";this.$AbstractDialogFitHeight1.release();this.$AbstractDialogFitHeight1=null;g.removeClass(this.$AbstractDialogFitHeight3,"_5pfh");};t.prototype.$AbstractDialogFitHeight2=function(){"use strict";var u=l.getViewportDimensions().y,v=u-this.$AbstractDialogFitHeight4;j.set(this.$AbstractDialogFitHeight3,this.getHeightProperty(),Math.max(p,v)+'px');this.$AbstractDialogFitHeight0.updatePosition();};e.exports=t;},null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getHeightProperty=function(){"use strict";return 'height';};e.exports=j;},null);
__d("ChatTabMessagesView",["Animation","Arbiter","BanzaiLogger","BootloadedComponent.react","Bootloader","ChatConfig","ChatConversation.react","ChatTabViewEvents","ChatWelcomeMessage","CSS","DOM","Event","MercuryLastMessageIndicator.react","LiveTimer","MercuryViewer","MercuryMessageStore","React","Scroll","ServerTime","StickerActions","StickerState","StickerStoreController","Style","SubscriptionsHandler","UserAgent_DEPRECATED","arrayContains","copyProperties","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){b.__markCompiled&&b.__markCompiled();'use strict';var ja=70,ka=null,la=20;function ma(oa){if(ka===null){var pa=oa.childNodes[0];ca.set(oa,'overflow','scroll');ka=pa.clientWidth-ja;ca.set(oa,'overflow','');}return ka;}function na(oa,pa,qa,ra,sa,ta,ua,va){this.loadingIcon=sa;this.threadID=oa;this.sheetController=pa;this.scrollContainer=qa;this.conversationElem=ra;this.tabView=va;t.restart(y.get()/1000);this._loadingMoreMessages=false;function wa(){n.inform('interaction-with-tab',oa);}this._subscriptions=new da();this._subscriptions.addSubscriptions(h.subscribe('overflow-applied-to-body',this.scrollToBottom.bind(this)),r.listen(this.scrollContainer,'mousedown',wa));if(ea.firefox()){var xa=('WheelEvent' in window)?'wheel':'DOMMouseScroll';this.scrollContainer.addEventListener(xa,wa,false);}else this._subscriptions.addSubscriptions(r.listen(this.scrollContainer,'mousewheel',wa));this._subscriptions.addSubscriptions(r.listen(this.scrollContainer,'scroll',ia(this.scrolling,50,this)));if(l.get('chat_react')){var ya;w.render(w.createElement(j,{bootloadPlaceholder:w.createElement("span",null),bootloadComponent:function(ab){k.loadModules(["ChatTypingIndicators.react"],ab);},threadID:this.threadID,indicatorsWillShow:function(){return ya=this.isScrolledToBottom();}.bind(this),indicatorsDidShow:function(){return ya&&this.scrollToBottom(true);}.bind(this)}),ua);}else k.loadModules(["MercuryTypingIndicator"],function(ab){this.typingIndicator=new ab(this.threadID,ua,this);}.bind(this));var za;this.lastMessageIndicatorNode=ta;this.lastMessageIndicator=w.render(w.createElement(s,{threadID:this.threadID,hideTyping:true,indicatorWillShow:function(){return za=this.isScrolledToBottom();}.bind(this),indicatorDidShow:function(){return za&&this.scrollToBottom(true);}.bind(this)}),this.lastMessageIndicatorNode);this.initializeConversation();}ga(na.prototype,{initializeConversation:function(){this._store=new v(this.threadID);this._conversation=w.render(w.createElement(m,{maxBubbleWidth:ma(this.scrollContainer),messages:[],onImageLoad:function(oa){var pa=this.scrollContainer,qa=x.getTop(pa)+pa.clientHeight;if(qa+oa.offsetHeight>=pa.scrollHeight)this.scrollToBottom();}.bind(this),onStickerClick:this._onStickerClick.bind(this),onCallLinkClick:function(oa,pa,qa){n.inform('video-call-clicked',{userID:oa,threadID:pa,clickSource:qa});}}),this.conversationElem);this._subscriptions.addSubscriptions(this._store.subscribe(function(oa){if(oa.eventType==v.MESSAGES_RECEIVED&&oa.allFromOthers&&!this.isScrolledToBottom()){this.sheetController.openNewMessagesSheet();this._newMessagesSheetOpened=true;}if(oa.eventType==v.MESSAGES_REORDERED){this._loadingMoreMessages=false;p.hide(this.loadingIcon);}var pa=this.isScrolledToBottom(),qa=this._getLoadingHeight(),ra=this.scrollContainer.scrollHeight,sa=x.getTop(this.scrollContainer),ta=oa.messages,ua=o.getWelcomeMessage(this.threadID);if(ua)ta.push(ua);this._conversation.setProps({messages:ta},function(){if(pa||this._shouldScrollToBottom){this.scrollToBottom();this.setShouldScrollToBottom(false);}else if(oa.eventType==v.MESSAGES_REORDERED)this.scrollToPosition(this.scrollContainer.scrollHeight-ra-qa+sa);}.bind(this));this.lastMessageIndicator.setProps({lastMessage:ta.length>0?ta[ta.length-1]:null});if(oa.eventType==v.MESSAGES_RECEIVED&&this._shouldShowStickerReplyNUX(ta)&&this.tabView&&this.tabView.isFocused())this.tabView.showStickerReplyNUX();if(oa.eventType==v.MESSAGES_CHANGED)this._checkToAnimateSticker();}.bind(this)));},setShouldScrollToBottom:function(oa){this._shouldScrollToBottom=oa;},scrolling:function(){this._checkToAnimateSticker();if(this.isScrolledNearTop()&&!this._loadingMoreMessages&&!this.isScrolledToBottom()&&!this.tabView._isDragDropActive)if(this._store.fetchMoreMessages()){p.show(this.loadingIcon);this._loadingMoreMessages=true;}if(!this._newMessagesSheetOpened)return;if(this.isScrolledToBottom()){this.sheetController.closeNewMessagesSheet();this._newMessagesSheetOpened=false;}},getScrollTop:function(){return this.scrollContainer&&x.getTop(this.scrollContainer);},destroy:function(){q.scry(this.conversationElem,'.stickerContainer').forEach(function(oa){return w.unmountComponentAtNode(oa);});w.unmountComponentAtNode(this.conversationElem);this._subscriptions&&this._subscriptions.release();w.unmountComponentAtNode(this.lastMessageIndicatorNode);delete this.lastMessageIndicator;this._store&&this._store.destroy();this.destroyed=true;},_getLoadingHeight:function(){return this.loadingHeight||this.loadingIcon.clientHeight;},_shouldShowStickerReplyNUX:function(oa){if(!aa.shouldShowStickerReplyNUX()||!oa.length)return false;var pa=oa[oa.length-1];if(pa.author===u.getID())return false;if(pa.has_attachment)return pa.attachments.some(function(qa){return qa.attach_type==='sticker';});return false;},isScrolledToBottom:function(oa){var pa=this.scrollContainer;oa=oa||la;return x.getTop(pa)+pa.clientHeight>=pa.scrollHeight-oa;},isScrolledNearTop:function(){return x.getTop(this.scrollContainer)<this.scrollContainer.clientHeight;},scrollToBottom:function(oa){this.scrollToPosition(this.scrollContainer.scrollHeight,oa);},scrollToPosition:function(oa,pa){this._scrollTopAnimation&&this._scrollTopAnimation.stop();if(pa===true){this._scrollTopAnimation=(new g(this.scrollContainer)).to('scrollTop',oa).ease(g.ease.end).duration(400).go();}else x.setTop(this.scrollContainer,oa);},_onStickerClick:function(oa,pa){if(!oa)return;i.log('StickersLoggerConfig',{event:'click_sticker',packid:oa,stickerid:pa});var qa=this.tabView;aa.onTrayDataReady(function(){if(fa(aa.getPackIDsInTray(),oa)){var ra=aa.getPack(oa);if(ra&&ra.isPromoted)z.addPack(oa);qa.setStickersFlyoutPackID(oa);}else ba.showStore(oa);});},_checkToAnimateSticker:function(){var oa=ha(this.scrollContainer);h.inform('chatScrolled/'+this.threadID,{scrollTop:x.getTop(this.scrollContainer),top:oa.y,viewHeight:oa.height});},setNewThreadID:function(oa){this._store.setNewThreadID(oa);}});e.exports=na;},null);
__d("ChatTabModel",["Arbiter","ArbiterMixin","ChatBehavior","ChatDispatcher","ChatConfig","ChatCookieInterface","ChatTabActions","InitialServerTime","LogHistory","JSLogger","MercuryAssert","MercuryLocalIDs","PresenceState","PresenceUtil","areJSONRepresentationsEqual","copyProperties","MercuryServerRequests","MercuryThreads","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=b('MercuryServerRequests').get(),x=b('MercuryThreads').get(),y=b('MercuryTimestampTracker').get(),z=[],aa=null,ba=null,ca=null,da=n.serverTime,ea=k.get('tab_max_load_age')||3600000,fa=da-ea,ga=0,ha=20,ia=o.getInstance('chat_tab_model'),ja=false;function ka(hb){var ib=s.verifyNumber(hb.uct2);if(!ib||typeof ib!=='number'){ia.warn('bad_cookie_version',hb);return null;}if(ib<ga||ib<fa)return null;return ib;}function la(hb){if(hb){var ib=ka(hb);if(ib&&ib!==ga){var jb={};jb.old_tabs=JSON.stringify(z);jb.old_promoted=aa;jb.old_time=ga;jb.old_reason=ca;jb.window_id=t.getSessionID();jb.cookie_tabs=hb&&hb.t2&&JSON.stringify(hb.t2);jb.cookie_promoted=hb&&hb.lm2;jb.cookie_time=hb&&hb.uct2;jb.cookie_reason=hb&&hb.tr;jb.cookie_window=hb&&hb.tw;ga=ib;ca='load';var kb=ma(hb.t2,hb.lm2||null);jb.load_result=kb;jb.new_tabs=JSON.stringify(z);jb.new_promoted=aa;jb.new_time=ga;jb.new_reason=ca;var event='load';if(!ja)event+='_init';ia.log(event,jb);return kb;}}else ia.warn('load_bad_state',hb);return false;}function ma(hb,ib){if(na(hb,ib)){var jb=z.filter(function(mb){return mb.fragile;}),kb={};aa=null;z=hb.map(function(mb){var nb={id:mb.i,server_id:mb.si};if(nb.id==ib)aa=nb.id;if(mb.r)nb.raised=true;kb[nb.id]=nb;return nb;});z=z.filter(function(mb){return mb!=null;});if(ba)for(var lb in ba)if(!kb[lb]||!kb[lb].raised)delete ba[lb];jb=jb.filter(function(mb){return !kb[mb.id];});z=z.concat(jb);ra();return true;}return false;}function na(hb,ib){if(ib!=aa)return true;var jb=z.filter(function(mb){return !mb.fragile;});if(hb.length!=jb.length)return true;for(var kb=0,lb=hb.length;kb<lb;kb++)if(!u(hb[kb],jb[kb]))return true;return false;}function oa(hb,ib,jb){var kb=la(s.get());if(ib===(void 0)||ib>ga){if(hb()){kb=true;ca=jb||null;qa(ib);}}else ia.error('rejected',{change_time:ib,state_time:ga});kb&&pa();}function pa(){if(ja)fb.inform('chat/tabs-changed',fb.get());}function qa(hb){if(hb===(void 0))hb=Math.max(y.getLastUserMessageTimestamp()||1,ga+1);ga=hb;s.doSync();}function ra(hb){var ib=z.length-ha;if(ib>0)z=z.filter(function(jb){return jb.raised||jb.id==hb||ib--<=0;});if(ib>0)z=z.filter(function(jb){return jb.id==aa||jb.id==hb||ib--<=0;});}function sa(hb){for(var ib=0;ib<z.length;ib++)if(z[ib].id==hb)return ib;return -1;}function ta(hb,ib){var jb=x.getThreadMetaNow(hb);if(!jb)return false;if(jb.is_canonical_user){return va(hb,ib);}else{var kb=ua(hb);if(kb)w.getServerThreadID(hb,function(lb){if(ya(hb,lb)){qa();pa();}});return kb;}}function ua(hb){if(sa(hb)===-1){z.push({id:hb,fragile:true});ia.log('open_fragile_tab',{tabs:JSON.stringify(z),opened:hb,window_id:t.getSessionID()});return true;}return false;}function va(hb,ib){var jb=sa(hb);if(jb!=-1)if(z[jb].fragile){z.splice(jb,1);}else{ib&&(z[jb].signatureID=ib);return true;}for(var kb=0;kb<=z.length;kb++)if(kb==z.length||z[kb].fragile){z.splice(kb,0,{id:hb,signatureID:ib});ra(hb);ia.log('open_tab',{tabs:JSON.stringify(z),opened:hb,window_id:t.getSessionID()});return true;}}function wa(hb,ib,jb){q.isThreadID(hb);var kb=false;if(ba&&ib){ba[hb]=true;kb=true;}oa(function(){if(ta(hb,jb))kb=true;var lb=sa(hb);if(lb!=-1&&!z[lb].raised){z[lb].raised=true;kb=true;ia.log('raise_tab',{tabs:JSON.stringify(z),raised:hb,window_id:t.getSessionID()});}return kb;});}function xa(hb){var ib=sa(hb);if(ib!=-1&&(!z[ib].raised||aa!==hb)){z[ib].raised=true;aa=hb;return true;}return false;}function ya(hb,ib){var jb=sa(hb);if(jb!=-1&&z[jb].fragile){var kb=z[jb];kb.fragile=false;kb.server_id=ib;var lb=[];z.forEach(function(mb){if(mb.id!=hb){if(kb&&mb.fragile){lb.push(kb);kb=null;}lb.push(mb);}});if(kb)lb.push(kb);z=lb;ia.log('make_permanent',{tabs:JSON.stringify(z),tab_id:hb,window_id:t.getSessionID()});return true;}return false;}function za(hb,ib){q.isThreadID(hb);var jb=false;if(ba){delete ba[hb];jb=true;}oa(function(){if(ab(hb))jb=true;return jb;},(void 0),ib);}function ab(hb){var ib=sa(hb);if(hb==aa)aa=null;if(ib!=-1){z.splice(ib,1);ia.log('close_tab',{tabs:JSON.stringify(z),closed:hb,window_id:t.getSessionID()});return true;}return false;}function bb(){if(z.length){ia.log('close_all_tabs',{closed_tabs:JSON.stringify(z),window_id:t.getSessionID()});z=[];aa=null;if(ba)ba={};qa();pa();}}function cb(){var hb=[];for(var ib=0;ib<z.length;ib++)if(z[ib].fragile&&!x.isNewEmptyLocalThread(z[ib].id)){hb.push(z[ib]);z.splice(ib);pa();break;}ia.log('close_fragile_tabs',{tabs:JSON.stringify(z),fragile_closed:hb,window_id:t.getSessionID()});}function db(hb){q.isThreadID(hb);var ib=false;if(ba){delete ba[hb];ib=true;}oa(function(){var jb=sa(hb);if(jb!=-1&&z[jb].raised){delete z[jb].raised;ia.log('lower_tab',{tabs:JSON.stringify(z),lowered:hb,window_id:t.getSessionID()});ib=true;}return ib;});}function eb(){if(ba){oa(function(){var hb=false;z.forEach(function(ib){if(ib.raised!=ba[ib.id]){hb=true;if(ba[ib.id]){ib.raised=true;}else delete ib.raised;}});return hb;});ia.log('persist_local_raise',{tabs:JSON.stringify(z),window_id:t.getSessionID()});}}s.registerStateStorer(function(hb){return l.store(hb,{tabs:z,promotedTab:aa,lastChangeTime:ga,lastChangeReason:ca});});s.registerStateLoader(function(hb){if(la(hb))pa();});function fb(){}v(fb,h,{isTabPromoted:function(hb){if(hb)return hb==aa;return false;},indexOf:function(hb){return sa(hb);},getTab:function(hb){q.isThreadID(hb);var ib=this.indexOf(hb);if(ib>-1){var jb=z[ib];return v({},jb);}return null;},getEmptyTab:function(){var hb;for(var ib=0;ib<z.length;ib++){hb=z[ib].id;if(x.isNewEmptyLocalThread(hb))return hb;}hb=r.generateThreadID();x.createNewLocalThread(hb,[]);return hb;},get:function(){var hb=z.map(function(ib){var jb=v({},ib);delete jb.fragile;if(ba)jb.raised=ba[jb.id];return jb;});return {tabs:hb,promoted:aa};},openFragileTab:function(hb){q.isThreadID(hb);if(ua(hb))pa();},openTab:function(hb){q.isThreadID(hb);oa(ta.bind(null,hb));},raiseAndPromoteTab:function(hb,ib,jb,kb,lb){q.isThreadID(hb);var mb=false;if(ba&&ib){ba[hb]=true;mb=true;}oa(function(){if(ta(hb,jb))mb=true;if(xa(hb)){mb=true;ia.log('raise_and_promote_tab',{tabs:JSON.stringify(z),promoted:hb,window_id:t.getSessionID()});}return mb;},kb,lb);},promoteThreadInPlaceOfThread:function(hb,ib,jb,kb){q.isThreadID(hb);q.isThreadID(ib);oa(function(){var lb=sa(hb),mb=sa(ib);if(kb){aa=hb;}else if(aa===ib)return true;var nb=z[lb];if(jb){q.isThreadID(jb);var ob=sa(jb),pb=z[mb];z[mb]=nb;z.splice(lb,1);z.splice(ob,0,pb);}else{z[lb]=z[mb];z[mb]=nb;}return true;});}});g.subscribe(p.DUMP_EVENT,function(hb,ib){ib.chat_tabs={promoted:aa,tabs:z.map(function(jb){return v({},jb);}),time:ga,max_load_age:ea};});function gb(){var hb=i.ignoresRemoteTabRaise();if(hb&&!ba){ia.log('start_ignore_remote_raise');ba={};pa();}else if(!hb&&ba){ia.log('stop_ignore_remote_raise');ba=null;pa();}}j.register(function(hb){switch(hb.actionType){case m.Types.CLOSE_TAB:za(hb.threadID,hb.reason);break;case m.Types.CLOSE_ALL_TABS:bb();break;case m.Types.CLOSE_FRAGILE_TABS:cb();break;case m.Types.LOWER_TAB:db(hb.threadID);break;case m.Types.PERSIST_LOCAL_STATE:eb();break;case m.Types.PROMOTE_TAB:q.isThreadID(hb.threadID);oa(xa.bind(null,hb.threadID));break;case m.Types.RAISE_TAB:wa(hb.threadID,hb.userAction,hb.signatureID);break;}});i.subscribe(i.ON_CHANGED,gb);gb();la(s.getInitial(),true);if(ga===0)ga=da-600000;ja=true;e.exports=fb;},null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM","MercuryThreadInfo"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={showMuteChangeDialog:function(l,m){g.send(new h('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(m),function(n){n.subscribe('confirm',function(){this.hide();var o;i.scry(this.getRoot(),'input[type="radio"]').forEach(function(p){if(p.checked)o=p.value;});o=k.convertRawMuteSetting(o);d(['MercuryThreadActions'],function(p){p.get().updateMuteSetting(l,o);});}.bind(n));});},convertRawMuteSetting:function(l){switch(l){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var m,n=new Date(),o=new Date();o.setHours(8);o.setMinutes(0);o.setSeconds(0);if(o>n){m=o-n;}else m=o-n+(24*3600*1000);return m/1000;default:return 0;}}};e.exports=k;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig","debounce","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=500,s=[],t={},u={},v={},w=false,x=false;for(var y in j)if(j.hasOwnProperty(y))aa[y]=j[y];var z=j===null?null:j.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=j;function aa(ba){"use strict";ba=ba||{};ba.kanaNormalization=true;j.call(this,ba);this.logQuery=p(function(ca){this.$MercuryTypeaheadDataSource0(ca);},r,this,true);this.logResponse=p(function(ca){this.$MercuryTypeaheadDataSource0(ca);},r,this,true);}aa.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=s;this.localCache=u;this.queryCache=t;this.queryIDs=v;return this;};aa.prototype.bootstrap=function(){"use strict";if(w||x)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});x=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});x=false;w=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};aa.prototype.updateBootstrapData=function(){"use strict";var ba=this.getCachedShortProfileIDs(),ca=o.is_work_user?k.FB4C:k.FRIEND,da=ba.map(function(ea){var fa=n.getNow(ea),ga=ea==i.getID()?ca:fa.type,ha=[fa.additionalName,fa.alternateName].concat(fa.searchTokens||[]).join(' ');return {uid:ea,index:m.getActiveRank(ea),text:fa.name,tokens:ha,localized_text:fa.name,additional_text:fa.additionalName,photo:fa.thumbSrc,render_type:ga,type:l.USER_TYPE};});if(da.length)this.addEntries(da);};aa.prototype.query=function(ba,ca,da,ea){"use strict";var fa=ca||ba.length===1;return z.query.call(this,ba,fa,da,ea);};aa.prototype.getQueryData=function(ba,ca){"use strict";return q(z.getQueryData.call(this,ba,ca),{needs_friends:!this.isBootstrapped()});};aa.prototype.setEntry=function(ba,ca){"use strict";this.$MercuryTypeaheadDataSource1[ba]=ca;};aa.prototype.getEntry=function(ba){"use strict";return this.$MercuryTypeaheadDataSource1[ba]||null;};aa.prototype.getCachedShortProfileIDs=function(){"use strict";var ba=n.getCachedProfileIDs(),ca=ba.filter(function(da){var ea=n.getNow(da);return (da==i.getID()||ea.type===k.FRIEND);});return ca;};aa.prototype.isBootstrapped=function(){"use strict";return w;};aa.prototype.isBootstrapping=function(){"use strict";return x;};aa.prototype.$MercuryTypeaheadDataSource0=function(ba){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',ba);};e.exports=aa;},null);
__d("MessagesEmoticons.react",["Grid.react","React","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g.GridItem,m=h,n=m.PropTypes,o=8,p={smile:k._("contento"),frown:k._("ce\u00f1udo"),tongue:k._("sacar la lengua"),grin:k._("sonrisa"),gasp:k._("sorpresa"),wink:k._("gui\u00f1o"),pacman:k._("pacman"),grumpy:k._("gru\u00f1\u00f3n"),unsure:k._("inseguro"),cry:k._("llorar"),kiki:k._("muy feliz"),glasses:k._("lentes"),sunglasses:k._("lentes de sol"),heart:k._("coraz\u00f3n"),devil:k._("diablo"),angel:k._("\u00e1ngel"),squint:k._("ojos entornados"),confused:k._("confundido"),upset:k._("enfado"),colonthree:k._("feliz"),like:k._("me gusta")},q=h.createClass({displayName:"MessagesEmoticons",propTypes:{onEmoticonSelect:n.func},getDefaultProps:function(){return {onEmoticonSelect:j};},getEmoticons:function(){return Object.keys(p).map(function(r){return (h.createElement(l,{key:r},h.createElement("div",{className:"panelCell"},h.createElement("a",{"aria-label":p[r],className:'emoticon emoticon_'+r,onClick:function(){return this.props.onEmoticonSelect(r);}.bind(this)}))));}.bind(this));},render:function(){return (h.createElement("div",{className:"emoticonsTable"},h.createElement(g,{cols:o,alignv:"middle",alignh:"center",spacing:"pam"},this.getEmoticons())));}});e.exports=q;},null);
__d("MercuryStateCheck",["Arbiter","ChannelConstants","MercuryAPIArgsSource","MercuryFolders","MercuryOrderedThreadlist","MercuryServerRequests","MercurySingletonMixin","MessagingTag","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(q){"use strict";this.$MercuryStateCheck0=q;this.$MercuryStateCheck1=l.getForFBID(this.$MercuryStateCheck0);this.$MercuryStateCheck2=k.getForFBID(this.$MercuryStateCheck0);g.subscribe(h.ON_INVALID_HISTORY,this.$MercuryStateCheck3.bind(this));d(['ChannelConnection'],function(r){r.subscribe(r.CONNECTED,function(s,t){if(!t.init)this.$MercuryStateCheck4();}.bind(this));}.bind(this));}p.prototype.$MercuryStateCheck3=function(){"use strict";var q;if(o.getRequestURI().getPath().search(/messages/)!==-1){q=j.getSupportedFolders();}else q=[n.INBOX];this.$MercuryStateCheck1.fetchMissedMessages(q,i.MERCURYSYNC);};p.prototype.$MercuryStateCheck4=function(){"use strict";var q=this.$MercuryStateCheck2.getAvailableThreadlistNow(n.INBOX)||[];q=q.slice(0,20);this.$MercuryStateCheck1.fetchThreadData(q,i.MERCURYSYNC);this.$MercuryStateCheck3();};Object.assign(p,m);e.exports=p;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m){var n=h.listen(l,'change',i.thatReturnsFalse,h.Priority.URGENT);try{m();}catch(o){throw o;}finally{n.remove();}}function k(l){"use strict";this._form=l;}k.prototype.enable=function(){"use strict";var l=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(l,0);});};k.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;};k.prototype._reset=function(){"use strict";var l=this._form.getRoot();j(l,function(){var m=g.scry(l,'input[type="file"]');m.forEach(function(n){n.value='';});});};e.exports=k;},null);
__d("Token",["CSS","DataStore","DOM","Locale","UnicodeBidi","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o){"use strict";this.info=n;this.paramName=o;}m.prototype.getInfo=function(){"use strict";return this.info;};m.prototype.getText=function(){"use strict";return this.info.text;};m.prototype.getValue=function(){"use strict";return this.info.uid;};m.prototype.isFreeform=function(){"use strict";return !!this.info.freeform;};m.prototype.setSelected=function(n){"use strict";g.conditionClass(this.getElement(),'uiTokenSelected',n);return this;};m.prototype.getElement=function(){"use strict";if(!this.element)this.setElement(this.createElement());return this.element;};m.prototype.setElement=function(n){"use strict";h.set(n,'Token',this);this.element=n;return this;};m.prototype.isRemovable=function(){"use strict";return g.hasClass(this.element,'removable');};m.prototype.getTextDirection=function(){"use strict";var n=k.isDirectionRTL(this.getText()),o=j.isRTL();if(n&&!o)return 'rtl';if(!n&&o)return 'ltr';return null;};m.prototype.createElement=function(n,o){"use strict";var p=this.paramName,q=this.getText(),r=this.getValue(),s=i.create('a',{href:'#','aria-label':l._("Eliminar {item}",[l.param("item",q)]),className:'remove uiCloseButton uiCloseButtonSmall'});if(n)g.addClass(s,'uiCloseButtonSmallGray');var t=i.create('input',{type:'hidden',value:r,name:p+'[]',autocomplete:'off'}),u=i.create('input',{type:'hidden',value:q,name:'text_'+p+'[]',autocomplete:'off'}),v={className:'removable uiToken'},w=this.getTextDirection();if(w!==null)v.dir=w;var x=i.create('span',v,[q,t,u,s]);if(n)g.addClass(x,'uiTokenGray');if(o){var y=i.create('i',{className:o});i.prependContent(x,y);}return x;};e.exports=m;},null);
__d("WeakToken",["CSS","Token"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.createElement=function(){"use strict";var l=j.createElement.call(this,true,'UFIWeakReferenceIcon');g.addClass(l,'uiTokenWeakReference');return l;};e.exports=k;},null);
__d("Tokenizer",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","DOMQuery","Event","Focus","Input","Keys","Parent","StickyPlaceholderInput","Style","TextMetrics","Token","UserAgent_DEPRECATED","WeakToken","copyProperties","createObjectFrom","emptyFunction","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba=20,ca=aa(h);for(var da in ca)if(ca.hasOwnProperty(da))fa[da]=ca[da];var ea=ca===null?null:ca.prototype;fa.prototype=Object.create(ea);fa.prototype.constructor=fa;fa.__superConstructor__=ca;function fa(ga,ha,ia){"use strict";this.element=ga;this.typeahead=ha;this.input=ha.getCore().getElement();if(ia)this.init(ia.tokenarea,ia.param_name,ia.initial_info,ia.options);j.set(this.element,'Tokenizer',this);}fa.prototype.init=function(ga,ha,ia,ja){"use strict";this._handleEvents=this.handleEvents.bind(this);this.init=z;this.setTokenarea(ga);this.paramName=ha;if(!this.placeholder)this.placeholder=this.input.getAttribute('data-placeholder')||this.input.getAttribute('placeholder')||'';x(this,ja||{});this.initEvents();this.initTypeahead();this.reset(ia);this.initBehaviors();setTimeout(this.adjustWidth.bind(this),0);g.inform('Tokenizer/init',this,g.BEHAVIOR_PERSISTENT);this.inform('init',{tokens:this.getTokens()});};fa.prototype.reset=function(ga){"use strict";this.tokens=[];this.unique={};if(ga){this.populate(ga);}else k.empty(this.tokenarea);this.updateTokenarea();};fa.prototype.populate=function(ga){"use strict";var ha=[];this.tokens=this.getTokenElements().map(function(ia,ja){var ka=ga[ja];ha.push(this._tokenKey(ka));return this.createToken(ka,ia);},this);this.unique=y(ha,this.tokens);};fa.prototype.setTokenarea=function(ga){"use strict";var ha=!this.tokenarea;if(ga!==this.tokenarea){if(this.tokenarea){k.remove(this.tokenarea);for(var ia in this._tokenareaListeners)this._tokenareaListeners[ia].remove();}this._tokenareaListeners=m.listen(ga,{click:this._handleEvents,keydown:this._handleEvents});this.tokenarea=ga;}if(!ha)this.reset();};fa.prototype.getElement=function(){"use strict";return this.element;};fa.prototype.getTypeahead=function(){"use strict";return this.typeahead;};fa.prototype.getInput=function(){"use strict";return this.input;};fa.prototype.initBehaviors=function(){"use strict";this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array){this.behaviors.forEach(function(ia){ia.behavior(this,ia.config);}.bind(this));}else for(var ga in (this.behaviors||{})){var ha=window.TokenizerBehaviors&&window.TokenizerBehaviors[ga];ha.call(null,this,this.behaviors[ga]);}};fa.prototype.initTypeahead=function(){"use strict";var ga=this.typeahead.getCore();ga.resetOnSelect=true;ga.setValueOnSelect=false;ga.preventFocusChangeOnTab=true;if(this.inline){var ha=this.typeahead.getView();i.addClass(ha.getElement(),'uiInlineTokenizerView');}this.typeahead.subscribe('select',function(ia,ja){return this.handleSelect(ja);}.bind(this));this.typeahead.subscribe('blur',this.handleBlur.bind(this));};fa.prototype.handleBlur=function(event){"use strict";this.inform('blur',{event:event});this.updatePlaceholder();};fa.prototype.handleSelect=function(ga){"use strict";var ha=ga.selected;if('uid' in ha){this.updateInput();this.addToken(this.createToken(ha));}};fa.prototype.initEvents=function(){"use strict";var ga=v.firefox()<4?'keypress':'keydown';m.listen(this.input,'paste',this.paste.bind(this));m.listen(this.input,ga,this.keydown.bind(this));};fa.prototype.handleEvents=function(event){"use strict";var ga=event.getTarget(),ha=ga&&this.getTokenElementFromTarget(ga);if(!ha)return;if(event.type!='keydown'||m.getKeyCode(event)==p.RETURN)this.processEvents(event,ga,ha);};fa.prototype.processEvents=function(event,ga,ha){"use strict";if(q.byClass(ga,'remove')){var ia=ha.nextSibling;ia=ia&&l.scry(ha.nextSibling,'.remove')[0];var ja=this.getTokenFromElement(ha);ja=this.addTokenData(ja,ga);this.removeToken(ja);this.focusOnTokenRemoval(event,ia);event.kill();}};fa.prototype.focusOnTokenRemoval=function(event,ga){"use strict";n.set(event.type=='keydown'&&ga||this.input);};fa.prototype.addTokenData=function(ga,ha){"use strict";return ga;};fa.prototype.keydown=function(event){"use strict";this.inform('keydown',{event:event});var ga=m.getKeyCode(event),ha=this.input;if(this.inline&&ga==p.BACKSPACE&&o.isEmpty(ha)){var ia=this.getLastToken();if(ia&&ia.isRemovable())this.removeToken(ia);}this.updateInput();};fa.prototype.paste=function(event){"use strict";this.inform('paste',{event:event});this.updateInput(true);};fa.prototype.focusInput=function(){"use strict";n.set(this.input);};fa.prototype.updateInput=function(ga){"use strict";if(!this.inline)return;setTimeout(function(){this.adjustWidth(this.input.value);if(ga)this.input.value=this.input.value;}.bind(this),20);r.setPlaceholderText(this.input,'');this.inform('resize');};fa.prototype.setPlaceholder=function(ga){"use strict";this.placeholder=ga;if(this.stickyPlaceholder)r.setPlaceholderText(this.input,ga);this.updatePlaceholder();};fa.prototype.updatePlaceholder=function(){"use strict";if(!this.inline||this.input.value)return;var ga=!this.tokens.length,ha='';if(ga||this.stickyPlaceholder){this.adjustWidth(this.placeholder);ha=this.placeholder;}else this.adjustWidth(this.input.value);r.setPlaceholderText(this.input,ha);};fa.prototype.adjustWidth=function(ga){"use strict";if(!this.inline||!this._getIsInDOM())return;if(!ga&&this.input.value==='')ga=this.placeholder;var ha=ba;if(ga!==this.placeholder||!this.getTokens().length||this.stickyPlaceholder){var ia=s.getFloat(this.getElement(),'width'),ja=this._getMetrics().measure(ga);ha=ja.width+this._getWidthOffset()+10;ha=(ha>=ia)?ia:ha;}s.set(this.input,'width',ha+'px');this.inform('resize');g.inform('reflow');};fa.prototype.getToken=function(ga){"use strict";return this.unique[ga]||null;};fa.prototype.getTokens=function(){"use strict";return this.tokens||[];};fa.prototype.getTokenElements=function(){"use strict";return l.scry(this.tokenarea,'span.uiToken');};fa.prototype.getTokenElementFromTarget=function(ga){"use strict";return q.byClass(ga,'uiToken');};fa.prototype.getTokenFromElement=function(ga){"use strict";return j.get(ga,'Token');};fa.prototype.getTokenValues=function(){"use strict";if(!this.tokens)return [];return this.tokens.map(function(ga){return ga.getValue();});};fa.prototype.getFirstToken=function(){"use strict";return this.tokens[0]||null;};fa.prototype.getLastToken=function(){"use strict";return this.tokens[this.tokens.length-1]||null;};fa.prototype.hasMaxTokens=function(){"use strict";return this.maxTokens&&this.maxTokens<=this.tokens.length;};fa.prototype.createToken=function(ga,ha){"use strict";var ia=this.getToken(this._tokenKey(ga));if(!ia)ia=ga.weak_reference?new w(ga,this.paramName):new u(ga,this.paramName);ha&&ia.setElement(ha);return ia;};fa.prototype.addToken=function(ga){"use strict";if(this.hasMaxTokens())return;var ha=this._tokenKey(ga.getInfo());if(ha in this.unique)return;this.unique[ha]=ga;this.tokens.push(ga);this.insertToken(ga);this.updateTokenarea();this.inform('addToken',ga);this.inform('changeTokens');g.inform('Form/change',{node:this.element});};fa.prototype.insertToken=function(ga){"use strict";k.appendContent(this.tokenarea,ga.getElement());};fa.prototype.removeToken=function(ga){"use strict";if(!ga)return;var ha=this.tokens.indexOf(ga);if(ha<0)return;this.tokens.splice(this.tokens.indexOf(ga),1);delete this.unique[this._tokenKey(ga.getInfo())];k.remove(ga.getElement());this.updateTokenarea();this.inform('removeToken',ga);this.inform('changeTokens');g.inform('Form/change',{node:this.element});};fa.prototype.removeAllTokens=function(){"use strict";this.reset();this.inform('changeTokens');this.inform('removeAllTokens');};fa.prototype.updateTokenarea=function(){"use strict";var ga=this.typeahead.getCore(),ha=this.getTokenValues();if(this.excludeDuplicates){this._exclusions||(this._exclusions=ga.getExclusions());ga.setExclusions(ha.concat(this._exclusions));}ga.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.inform('resize');g.inform('reflow');};fa.prototype.updateTokenareaVisibility=function(){"use strict";i.conditionShow(this.tokenarea,this.tokens.length!==0);};fa.prototype._tokenKey=function(ga){"use strict";return ga.uid+(ga.freeform?':':'');};fa.prototype._getWidthOffset=function(){"use strict";if(this._widthOffset===null){var ga=this.input.clientWidth,ha=s.getFloat(this.input,'width');if(ga==ha){this._widthOffset=s.getFloat(this.input,'paddingLeft')+s.getFloat(this.input,'paddingRight');}else this._widthOffset=0;}return this._widthOffset;};fa.prototype._getMetrics=function(){"use strict";if(!this._metrics)this._metrics=new t(this.input,this.inline);return this._metrics;};fa.prototype._getIsInDOM=function(){"use strict";return this._isInDOM||(this._isInDOM=l.contains(document.body,this.input));};fa.getInstance=function(ga){"use strict";var ha=q.byClass(ga,'uiTokenizer');return ha?j.get(ha,'Tokenizer'):null;};fa.init=function(ga,ha){"use strict";ga.init(ha.tokenarea,ha.param_name,ha.initial_info,ha.options);};x(fa.prototype,{inline:false,maxTokens:null,excludeDuplicates:true,placeholder:'',_widthOffset:null,_metrics:null});e.exports=fa;},null);
__d("StickerSearch",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h,i,j={},k={requestStickersForQuery:function(l,m){h=l;g.getStickersForQuery(l,function(n){return h===l&&m(n.payload);});},prepareTagsData:function(){if(!i)i=g.fetchTagData(function(l){j=l;});return i;},getTagByName:function(l){return j[l];},getTagsIndex:function(){return j;}};e.exports=k;},null);
__d("StickersFlyoutPackSelector.react",["Animation","ImmutableObject","Locale","React","Image.react","StickerActions","StickerConfig","StickerConstants","StickerInterfaces","StickerState","StickerStoreController","XUIBadge.react","cx","emptyFunction","fbt","ix","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=j,y=x.PropTypes,z=4,aa=200,ba=u._("Tienda de stickers"),ca=j.createClass({displayName:"StickersFlyoutPackSelector",propTypes:{stickerInterface:y.oneOf(w(o)),numNewPacks:y.number,packs:y.arrayOf(y.instanceOf(h)).isRequired,onPackClick:y.func,selectedPackID:y.string,resetTagSelectorFunc:y.func},getInitialState:function(){return {animating:false,page:0};},getDefaultProps:function(){return {stickerInterface:o.MESSAGES,numNewPacks:0};},shouldComponentUpdate:function(ea,fa){return !fa.animating;},onFlyoutShown:function(){if(this.props.packs.length>0){var ea=this._calculatePageForPack(this.props.selectedPackID);if(this.state.page!==ea)this._setPage(ea,0);}},_calculatePageForPack:function(ea){for(var fa=0;fa<this.props.packs.length;fa++)if(this.props.packs[fa].id==ea)return fa<=z?0:Math.floor((fa-1)/z);return 0;},_setPage:function(ea,fa){if(this.state.animating)return;this.setState({animating:true,page:ea},function(){var ga=j.findDOMNode(this.refs.positioner),ha=this._calculatePosition(ea);new g(ga).to(ha.reference,ha.offset+'px').ondone(function(){return this.setState({animating:false});}.bind(this)).duration(fa).go();});},_calculatePosition:function(ea){var fa=j.findDOMNode(this.refs.positioner),ga=fa.childNodes[ea].offsetLeft;if(i.isRTL()){var ha=fa.offsetWidth,ia=fa.childNodes[ea].offsetWidth;return {reference:'right',offset:ga+ia-ha};}return {reference:'left',offset:-ga};},_numPages:function(){return Math.max(1,Math.ceil((this.props.packs.length-1)/z));},_canGoPrev:function(){return this.state.page>0;},_canGoNext:function(){return this.state.page+1<this._numPages();},_goPrev:function(){this._canGoPrev()&&this._setPage(this.state.page-1,aa);},_goNext:function(){this._canGoNext()&&this._setPage(this.state.page+1,aa);},_openStore:function(){l.resetNumNewPacks();var ea=this.props.stickerInterface==o.COMPOSER;q.showStore(null,ea);},render:function(){return (j.createElement("div",{className:"_5r85"},this._renderStoreButton(),this._renderPrevArrow(),this._renderNextArrow(),j.createElement("div",{className:"_5r88"},j.createElement("div",{className:"_5r89",ref:"positioner"},this._renderPages()))));},_selectPack:function(ea){var fa=p.getPack(ea);if(fa&&fa.isPromoted)l.addPack(ea);if(ea===n.SEARCH_PACK_ID)this.props.resetTagSelectorFunc();if(this.props.onPackClick){this.props.onPackClick(ea);}else l.selectPack(ea);},_renderPages:function(){var ea=this.props.packs.map(function(ia,ja){return j.createElement(da,{key:ia.id,onClick:function(){return this._selectPack(ia.id);}.bind(this),pack:ia,selected:this.props.selectedPackID===ia.id,index:ja,isComments:this.props.stickerInterface==o.COMMENTS});}.bind(this)),fa=[];for(var ga=0;ga<ea.length;ga+=z){var ha=ga;ga===0&&ga++;fa.push(j.createElement("div",{className:"_5r81",key:ga},ea.slice(ha,ga+z)));}return fa;},_renderStoreButton:function(){return (j.createElement("a",{"aria-label":ba,className:"_5r86 rfloat","data-hover":"tooltip",onClick:this._openStore},j.createElement(k,{className:"_5r87",src:v('/images/messaging/stickers/selector/sticker_store.png')}),this._renderJewel()));},_renderJewel:function(){var ea=this.props.numNewPacks;if(!ea)return null;return (j.createElement(r,{className:"rfloat _3fhs",count:ea,maxcount:9,type:"special"}));},_renderPrevArrow:function(){if(!this._canGoPrev())return null;var ea=i.isRTL()?v('/images/messaging/stickers/selector/right.png'):v('/images/messaging/stickers/selector/left.png');return (j.createElement("a",{className:(("_37wu")+(' '+"lfloat")),onClick:this._goPrev},j.createElement(k,{className:"_5r84",src:ea})));},_renderNextArrow:function(){if(!this._canGoNext())return null;var ea=i.isRTL()?v('/images/messaging/stickers/selector/left.png'):v('/images/messaging/stickers/selector/right.png');return (j.createElement("a",{className:(("_37wv")+(' '+"rfloat")),onClick:this._goNext},j.createElement(k,{className:"_5r84",src:ea})));}}),da=j.createClass({displayName:"PackIcon",propTypes:{index:y.number,isComments:y.bool,onClick:y.func,pack:y.instanceOf(h).isRequired,selected:y.bool},getDefaultProps:function(){return {isComments:false,onClick:t};},_getPackIcon:function(ea){if(ea.id==n.SEARCH_PACK_ID)return v('/images/messaging/stickers/icons/search.png');if(ea.id==n.MRU_STICKER_PACK)return v('/images/messaging/stickers/icons/recent.png');if(ea.id==n.EMOTICON_PACK_ID)return v('/images/messaging/stickers/icons/emoji.png');return ea.icon;},render:function(){var ea=this.props.pack,fa=m.WebStickerSearch&&!m.StickerSearchInRecent?this.props.index===1||this.props.index===2:this.props.index===1,ga=(("_5r8a")+(this.props.selected?' '+"_5r8b":'')+(ea.id==n.MRU_STICKER_PACK?' '+"_5qcj":'')+(ea.id==n.SEARCH_PACK_ID?' '+"_5qck":'')+(fa?' '+"_eb3":'')),ha=this.props.isComments&&!ea.isCommentsCapable,ia=u._("Este paquete solo est\u00e1 disponible en fotos"),ja=u._("Este paquete solo est\u00e1 disponible para mensajes"),ka=ha?t:function(){return this.props.onClick(ea.id);}.bind(this),la=this._getPackIcon(ea);if(la===null)return null;var ma=ja;if(!ea.isMessengerCapable&&ea.isComposerCapable)ma=ia;return (j.createElement("a",{"aria-label":ha?ma:ea.name,className:ga,"data-id":ea.id,"data-hover":"tooltip",ref:"search_icon",onClick:ka,tabIndex:"0"},j.createElement(k,{className:((ha?"_2ji6":'')+(' '+"_5r8c")+(m.WebStickerSearch?' '+"_1viy":'')),src:la})));}});e.exports=ca;},null);
__d("StickersFlyoutStickerSelector.react",["BanzaiLogger","Grid.react","Image.react","ScrollableArea.react","React","Sticker.react","StickerConstants","StickerConfig","StickerImages","StickerInterfaces","StickerSearch","StickerState","StickerUtils","XUISpinner.react","cx","debounce","emptyFunction","fbt","getObjectValues","ix","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=h.GridItem,ca=k,da=ca.PropTypes,ea=320,fa=278,ga=m.MRU_STICKER_PACK,ha=44,ia=112,ja=v(function(la,ma){if(!la)return;g.log('StickersLoggerConfig',{event:'search_sticker',searchtoken:la,numsearchresults:ma.length});},1000),ka=k.createClass({displayName:"StickersFlyoutStickerSelector",propTypes:{height:da.number,stickerInterface:da.oneOf(y(p)),onQueryResultsFound:da.func,onScroll:da.func,packID:da.string,singleWordTags:da.array,typeaheadTags:da.array,userInput:da.string},getDefaultProps:function(){return {stickerInterface:p.MESSAGES,onScroll:w};},getInitialState:function(){return {loading:false,stickers:[]};},componentDidMount:function(){if(this.props.packID){this.requestStickersForPack(this.props.packID);return;}if(this.props.userInput)this.requestStickersForQuery(this.props.userInput);},componentWillReceiveProps:function(la){if(la.packID&&la.packID!==this.props.packID){this.requestStickersForPack(la.packID);}else if(la.userInput!==this.props.userInput)this.requestStickersForQuery(la.userInput);},requestStickersForQuery:function(la){this.setState({loading:true});q.requestStickersForQuery(la,function(ma){ma.map(function(na){return o.cacheSticker(na);});if(!this.props.tagChosen)ja(la,ma);if(this.props.stickerInterface==p.COMPOSER)ma=ma.filter(function(na){return na.isComposerCapable;});if(this.props.stickerInterface==p.COMMENTS)ma=ma.filter(function(na){return na.isCommentsCapable;});if(this.props.stickerInterface==p.MESSAGES)ma=ma.filter(function(na){return na.isMessengerCapable;});if(this.isMounted()){this.setState({loading:false,stickers:ma});if(n.EnterToSendSticker)this.props.onQueryResultsFound&&this.props.onQueryResultsFound(ma);}}.bind(this));},requestStickersForPack:function(la){this.setState({loading:true});o.requestStickersForPack(la,m.TRAY_SIZE,function(ma){if(la==ga){ma=r.getMRUStickerPack(ma);if(this.props.stickerInterface==p.COMPOSER)ma=ma.filter(function(na){return na.isComposerCapable;});if(this.props.stickerInterface==p.COMMENTS)ma=ma.filter(function(na){return na.isCommentsCapable;});if(this.props.stickerInterface==p.MESSAGES)ma=ma.filter(function(na){return na.isMessengerCapable;});}this.setState({loading:false,stickers:ma});}.bind(this));},renderStickers:function(){return this.state.stickers.map(function(la){var ma=s.getScaledDimensions(la.height,la.width,m.TRAY_SIZE);return (k.createElement(ba,{key:la.id},k.createElement("div",{className:"_5r8h","data-id":la.id},k.createElement(l,{animationTrigger:"hover",className:"_5r8i",frameCount:la.frameCount,frameRate:la.frameRate||83,framesPerCol:la.framesPerCol,framesPerRow:la.framesPerRow,sourceHeight:ma.height,sourceURI:la.sourceURI,sourceWidth:ma.width,spriteURI:la.spriteURI,paddedSpriteURI:la.paddedSpriteURI,stickerID:la.id,style:{cursor:'pointer'}}))));});},_onScroll:function(){var la=this.refs.stickerScrollable;if(la){var ma=la.getArea().getScrollTop();this.props.onScroll(ma);}},render:function(){if(this.state.loading){return (k.createElement("div",{className:"_e0r"},k.createElement(t,{size:"large"})));}else if(this.state.stickers.length===0){var la=(ea-ha*2-ia)/2+"px";return (k.createElement("div",{className:"_5jdt",style:{marginTop:la}},k.createElement(i,{src:z("/images/messaging/stickers/icons/sad_face.png")}),k.createElement("p",null,x._("No hay stickers para mostrar"))));}return (k.createElement(j,{ref:"stickerScrollable",height:this.props.height||ea,onScroll:aa(this._onScroll,200),width:fa,fade:true},k.createElement("div",{className:"_5r8k"},k.createElement(h,{cols:4,fixed:true},this.renderStickers()))));}});e.exports=ka;},null);
__d("StickersFlyoutTagSelector.react",["BanzaiLogger","Grid.react","ScrollableArea.react","Parent","React","Image.react","StickerConfig","StickerConstants","StickersFlyoutStickerSelector.react","StickerInterfaces","StickerSearch","StickerState","StickerUtils","Toggler","XUIButton.react","XUICloseButton.react","XUITextInput.react","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=h.GridItem,ca=k,da=ca.PropTypes,ea=320,fa=278,ga=44,ha=k.createClass({displayName:"StickersFlyoutTagSelector",propTypes:{trigger:da.string,stickerInterface:da.oneOf(aa(p)),resetTrigger:da.func,onSelectSticker:da.func},getInitialState:function(){return {input:'',isScrolling:false,tagChosen:false,matchedStickers:[]};},getDefaultProps:function(){return {trigger:null,stickerInterface:p.MESSAGES,resetTrigger:y,onSelectSticker:y};},componentDidMount:function(){var ia=j.byClass(k.findDOMNode(this),'uiToggle');if(ia)this._togglerSub=t.listen('show',ia,function(){this.isMounted()&&this.focusInput();}.bind(this));this.focusInput();this.selectTrigger(this.props.trigger);},componentWillUnmount:function(){this._togglerSub&&this._togglerSub.unsubscribe();},componentWillReceiveProps:function(ia){this.selectTrigger(ia.trigger);},focusInput:function(){this.refs.inputField.focusInput&&this.refs.inputField.focusInput();},_setMatchedStickers:function(ia){this.setState({matchedStickers:ia?ia:[]});},_onEnter:function(ia){ia.preventDefault();ia.stopPropagation();if(!m.EnterToSendSticker)return;var ja=this.state.matchedStickers;if(ja&&ja.length===1){this.props.onSelectSticker(ja[0].id,ia);this.setState({matchedStickers:[]});}},_inputChanged:function(ia){this.setState({input:ia.target.value,tagChosen:false,isScrolling:false});},_normalizeInput:function(ia){return ia.trim().replace(/\s+/,' ').toLowerCase();},_handleResetButtonClick:function(ia){ia.preventDefault();this.reset();},reset:function(){this.setState(this.getInitialState());},renderContentArea:function(){if(this.state.tagChosen||this._normalizeInput(this.state.input).length>1){return this.renderStickers();}else return m.StickerSearchInRecent?this.renderRecentStickers():this.renderTags();},render:function(){return (k.createElement("div",{className:(("_217a")+(this.state.isScrolling?' '+"_1hg1":''))},k.createElement("div",{className:"_5jdr"},k.createElement("span",{className:"_5jds"}),k.createElement(w,{onEnter:this._onEnter,onChange:this._inputChanged,ref:"inputField",placeholder:z._("Busca stickers"),value:this.state.input}),k.createElement(v,{size:"small",onClick:this._handleResetButtonClick,className:((this.state.input.length===0?"hidden_elem":''))})),this.renderContentArea()));},selectTag:function(ia){g.log('StickersLoggerConfig',{event:'select_tag',tagid:ia.id});this.setState({tagChosen:true,input:s.capitalizeWords(ia.name)});this.focusInput();},selectTrigger:function(ia){if(ia!==null){var ja=q.getTagByName(ia);this.setState({tagChosen:true,input:s.capitalizeWords(ja.name)});this.props.resetTrigger();}},_onScroll:function(ia){this.setState({isScrolling:!!ia});},renderStickers:function(){var ia=this._normalizeInput(this.state.input);return (k.createElement(o,{ref:"selector",height:ea-ga,userInput:ia,onScroll:this._onScroll,stickerInterface:this.props.stickerInterface,tagChosen:this.state.tagChosen,onQueryResultsFound:this._setMatchedStickers}));},renderRecentStickers:function(){if(this._normalizeInput(this.state.input).length===1)return k.createElement("div",null);return (k.createElement(o,{ref:"selector",height:ea-ga,packID:n.MRU_STICKER_PACK,onScroll:this._onScroll,stickerInterface:this.props.stickerInterface}));},renderTags:function(){var ia=r.getFeaturedTags().filter(function(ja){return ja.sourceURI!==null;}).sort(function(ja,ka){return ja.order-ka.order;}).map(function(ja,ka){return k.createElement(ba,{key:ka},k.createElement("div",{className:(("_t5c")+(ka<2?' '+"_1b27":'')+(ka%2===0?' '+"_t5d":'')+(ka%2!==0?' '+"_t5e":''))},k.createElement(u,{image:k.createElement(l,{src:ja.sourceURI}),label:ja.name,onClick:this.selectTag.bind(this,ja),className:"_5jdu",style:{background:'#'+ja.color_code},disabled:this._normalizeInput(this.state.input).length===1})));}.bind(this));return (k.createElement(i,{height:ea-ga,width:fa-16,shadow:true,fade:true,className:"_5jei"},k.createElement(h,{spacing:"pas",cols:2,fixed:true,ref:"grid"},ia)));}});e.exports=ha;},null);
__d("StickersFlyout.react",["BanzaiLogger","Event","Keys","MessagesEmoticons.react","Parent","ReactComponentWithPureRenderMixin","React","StickersFlyoutPackSelector.react","StickersFlyoutStickerSelector.react","StickerActions","StickerConstants","StickerConfig","StickersFlyoutTagSelector.react","StickerInterfaces","StickerState","SubscriptionsHandler","Toggler","XUISpinner.react","arrayContains","cx","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=m,ca=ba.PropTypes,da=q.SEARCH_PACK_ID,ea=m.createClass({displayName:"StickersFlyout",mixins:[l],propTypes:{stickerInterface:ca.oneOf(aa(t)),onStickerSelect:ca.func.isRequired,onEmoticonSelect:ca.func,onShown:ca.func,onHidden:ca.func,onEscKeyDown:ca.func,onPackSelect:ca.func,packID:ca.string,shown:ca.bool,trigger:ca.string},getDefaultProps:function(){return {stickerInterface:t.MESSAGES,packID:u.getTrayPackID(),shown:false,trigger:null};},getInitialState:function(){return {dataReady:false,numNewPacks:0};},componentDidMount:function(){if(r.LoadStickerEarly&&!this.state.dataReady)this.loadTrayData();this._toggle=k.byClass(m.findDOMNode(this),'uiToggle');this._subscriptions=new v();if(this._toggle){this._subscriptions.addSubscriptions(w.listen('show',this._toggle,this._onShownWrapper),w.listen('hide',this._toggle,this._onHidden));}else if(!r.LoadStickerEarly&&this.props.shown&&!this.state.dataReady)this.loadTrayData();this._subscriptions.addSubscriptions(h.listen(m.findDOMNode(this),'keydown',this._onKeyDown),u.addListener(u.PACKS_CHANGED,this.packsUpdated),u.addListener(u.NUM_NEW_PACKS_CHANGED,function(fa){this.setState({numNewPacks:fa});}.bind(this)));},_onShownWrapper:function(){if(this.props.onShown){this.props.onShown(this._onShown);}else this._onShown();},_onShown:function(){g.log('StickersLoggerConfig',{event:'open_tray'});if(!r.LoadStickerEarly&&!this.state.dataReady)this.loadTrayData();if(this.props.packID===da)this.refs.tagSelector&&this.refs.tagSelector.focusInput();this.refs.packSelector.onFlyoutShown();},_onHidden:function(){this.resetTagSelector();this.props.onHidden&&this.props.onHidden();},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(fa){if(!this.state.dataReady&&fa.shown)this.loadTrayData();},componentDidUpdate:function(fa){if(!fa.shown&&this.props.shown){this._onShown();}else if(fa.shown&&!this.props.shown)this._onHidden();},_onKeyDown:function(event){if(event.keyCode===i.ESC&&this.props.onEscKeyDown){this.props.onEscKeyDown();event.kill();}},resetTagSelector:function(){this.refs.tagSelector&&this.refs.tagSelector.reset();},loadTrayData:function(){u.onTrayDataReady(function(){var fa=u.getNumNewPacks();this.setState({dataReady:true,numNewPacks:fa});var ga=u.getPacksInTray()[0].id,ha=this.props.packID;if(!ha||!y(u.getPackIDsInTray(),ha)){p.selectPack(ga,true);this.props.onPackSelect&&this.props.onPackSelect(ga);}}.bind(this));},loadPack:function(){if(!this.state.dataReady)return (m.createElement("div",{className:"_e0r"},m.createElement(x,{size:"large"})));if(this.props.packID===q.EMOTICON_PACK_ID)return (m.createElement("div",{className:"_5r8l","data-id":this.props.packID},m.createElement(j,{onEmoticonSelect:this.props.onEmoticonSelect})));if(this.props.packID===da&&r.WebStickerSearch)return (m.createElement("div",{className:"_5r8l"},m.createElement(s,{ref:"tagSelector",className:"fbStickersFlyoutTagSelector",trigger:this.props.trigger,resetTrigger:function(){return this.setProps({trigger:null});}.bind(this),stickerInterface:this.props.stickerInterface,onSelectSticker:this.onSelectSticker})));return (m.createElement("div",{className:"_5r8l","data-id":this.props.packID},m.createElement(o,{ref:"selector",packID:this.props.packID,stickerInterface:this.props.stickerInterface})));},packsUpdated:function(){var fa=u.getPackIDsInTray();if(!y(fa,this.props.packID)){p.selectPack(fa[0]);return;}this.forceUpdate(null);},onSelectSticker:function(fa,event){if(fa){u.updateRecentlyUsed(fa);this.props.onStickerSelect(fa,event);if(r.PromotePackFromSearch&&this.props.packID===q.SEARCH_PACK_ID)u.promotePackSentFromSearch(fa);u.clearShowStickerReplyNUX();}},selectedSticker:function(event){var fa=k.byClass(event.target,"_5r8h");if(fa){var ga=fa.getAttribute('data-id');this.onSelectSticker(ga,event);}},render:function(){var fa;if(this.props.stickerInterface==t.COMPOSER){fa=u.getPacksInComposerTray();}else if(this.props.stickerInterface==t.COMMENTS){fa=u.getPacksInCommentsTray();}else if(this.props.stickerInterface==t.MESSAGES)fa=u.getPacksInTray();return (m.createElement("div",{className:"_5r8f"},m.createElement("div",{className:"_5r8e"},m.createElement(n,{ref:"packSelector",numNewPacks:this.state.numNewPacks,onPackClick:this.props.onPackSelect,selectedPackID:this.props.packID,packs:fa,stickerInterface:this.props.stickerInterface,resetTagSelectorFunc:this.resetTagSelector})),m.createElement("div",{className:"_5r8m",onClick:this.selectedSticker},this.loadPack())));}});e.exports=ea;},null);
__d("FormSubmitOnChange",["Event","copyProperties","submitForm"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._form=k;}j.prototype.enable=function(){"use strict";this._listener=g.listen(this._form.getRoot(),'change',this._submit.bind(this));};j.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};j.prototype._submit=function(){"use strict";i(this._form.getRoot());};h(j.prototype,{_listener:null});e.exports=j;},null);
__d("ClearableTypeahead",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){g.listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};e.exports=h;},null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);